<!DOCTYPE html><html lang="es-es">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="dcterms.date" content="2017-11-10">
<meta name="dcterms.rights" content="© Copyright IBM Corp. 2014, 2017">

<meta name="description" content="Puede utilizar varios servicios en el Catálogo de Bluemix con IBM Bluemix Container Service. Muchos de los servicios de Bluemix le ayudan a ofrecer prestaciones adicionales a las apps que puede desplegar en los contenedores. Además, se pueden usar algunos servicios de Bluemix para ayudarle a gestionar los contenedores.">
<meta name="keywords" content="IBM Containers, contenedores, servicios, Bluemix, integraciones, enlace, notificación de alerta, políticas, notificaciones, Delivery Pipeline, conducto, entrega continua, contenedor único, conducto de entrega, imagen, build, Vulnerability Advisor, seguridad, servicio, limpieza de imágenes, propiedades de entorno, enlazar, grupo de contenedores, Devops Services, contenedor, desplegar">
<meta name="geo.country" content="ZZ">
<script>
    digitalData = {
      page: {
        pageInfo: {
  language: "es-es",

  version: "v18",
  ibm: {
  country: "ZZ",
  type: "CT701"
  
         }
       }
     }
   };
  </script><link rel="stylesheet" type="text/css" href="./ibmdita.css">
<title>Integración de servicios que usar con contenedores únicos y escalables</title>
</head>
<body><main role="main"><div><article class="nested0" role="article" aria-labelledby="d58943e6" id="container_integrations"><h1 class="topictitle1" id="d58943e6"><span class="ph" id="title">Integración de servicios con <span class="ph">contenedores únicos y escalables</span></span></h1>
<div class="body conbody"><div class="abstract"><div class="shortdesc"><span class="ph" id="shortdesc">Puede utilizar varios servicios en el <span class="keyword wintitle">Catálogo</span> de <span class="keyword">Bluemix</span>
con <span class="keyword">IBM®
Bluemix Container Service</span>. Muchos de los servicios de <span class="keyword">Bluemix</span> le ayudan a ofrecer prestaciones adicionales a las apps que puede desplegar en los contenedores. Además, se pueden usar algunos servicios de <span class="keyword">Bluemix</span> para ayudarle a gestionar los contenedores. </span></div>


<div class="p"><div class="note attention"><span class="attentiontitle">Atención:</span> <span class="ph">No hay disponibles pruebas gratuitas para los <span class="ph">contenedores únicos y escalables</span>.
<a href="cs_ov.html" title="IBM Bluemix Container Service combina Docker y Kubernetes para ofrecer herramientas potentes, una interfaz intuitiva para el usuario y funciones integradas de seguridad e identificación para automatizar el despliegue, operación, escalado y supervisión de apps contenerizadas sobre un clúster de hosts de cálculo independientes mediante el uso de las API de Kubernetes.">Obtenga más información acerca de la gestión de clústeres y migre a Kubernetes en <span class="keyword">IBM
Bluemix Container Service</span> en <span class="keyword">Bluemix</span> Public.</a></span></div>
</div>


<div class="p">En esta página:<div class="lines">&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_integrations__data">Servicios de almacenamiento y análisis de datos</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_integrations__devops">DevOps services</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_integrations__integrate">Integración de servicios</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_integrations__network">Servicios de red</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_integrations__security">Servicios de seguridad</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_integrations_binding" title="IBM Bluemix tiene una lista de servicios y los gestiona en nombre de los desarrolladores de apps. Para añadir un servicio de Bluemix para utilizar el contenedor, debe solicitar una instancia de este servicio y enlazarlo al contenedor.">Enlace de un servicio desde la interfaz gráfica de usuario (GUI) de Bluemix</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_integrations_binding_cli" title="IBM Bluemix tiene una lista de servicios y los gestiona en nombre de los desarrolladores de apps. Para añadir un servicio de Bluemix para utilizar el contenedor, debe solicitar una instancia de este servicio y enlazarlo al contenedor.">Enlace de un servicio a un contenedor desde la CLI</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_alertnotification" title="Configure la app para enviar notificaciones cuando se cumpla una determinada condición o criterio y utilice el servicio de Alert Notification para gestionar las notificaciones de alerta. Con el servicio de Alert Notification, puede crear políticas de notificaciones personalizadas que filtran las alertas en las que está interesado. Puede acotar los filtros de la política como sea necesario para especificar a personas o grupos como destinatarios de alertas, así como la frecuencia y los métodos de notificación preferidos.">Configuración de alertas para apps que se despliegan en contenedores utilizando Alert Notification</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_pipeline_ov" title="Automatice las compilaciones de las apps y los despliegues de los contenedores en Bluemix mediante Delivery Pipeline, que forma parte de IBM Bluemix Continuous Delivery.">Automatización de los despliegues de contenedor con Delivery Pipeline en el servicio Continuous Delivery</a><br>
&nbsp;&nbsp;&nbsp;&nbsp; • <a href="container_integrations.html#container_cfapp_tutorial_intro" title="Puede tomar una app que ha desplegado anteriormente utilizando Cloud Foundry y desplegarla en un contenedor utilizando IBM Bluemix Container Service.">Guía de aprendizaje: Despliegue de una app Node.js de Cloud Foundry en un contenedor</a></div>
</div>
</div>
<section role="region" aria-labelledby="d58943e217" id="container_integrations__data"><h2 class="sectiontitle" id="d58943e217">Servicios de almacenamiento y análisis de datos</h2>
<div class="p"><dl><dt class="dlterm"><span class="keyword">Object Storage</span></dt>
<dd><p>Almacene los datos persistentes que se replican en varios nodos de almacenamiento para hacer una copia de seguridad.</p>

<div class="p"><ul><li>Para obtener información general sobre el servicio <span class="keyword">Object Storage</span>, consulte <a href="../services/ObjectStorage/index.html">Iniciación al servicio <span class="keyword">Object Storage</span></a>.</li>
</ul>
</div>
</dd>
</dl>
</div>
</section><section role="region" aria-labelledby="d58943e243" id="container_integrations__devops"><h2 class="sectiontitle" id="d58943e243">DevOps services</h2>
<div class="p"><dl><dt class="dlterm"><span class="keyword">Active Deploy</span></dt>
<dd><p>Actualice los grupos de contenedores en ejecución sin ningún tiempo de inactividad y, si es necesario, invierta rápidamente a la
versión original. El servicio de <span class="keyword">IBM Active
Deploy for Bluemix</span>
utiliza un enfoque por fases para despliegues, lo que le proporciona tiempo para probar y validar la app actualizada
en un entorno de producción.</p>
</dd>
<dd class="ddexpand"><div class="p">Para obtener información sobre la actualización de grupos de contenedores en ejecución, consulte:<ul><li><a href="../services/ActiveDeploy/updatingapps.html#updatingappscli" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">Actualización de apps o grupos de contenedores con el servicio Active Deploy (CLI)</a></li>
<li><a href="../services/ActiveDeploy/updatingapps.html#updatingappsgui" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">Actualización de apps o grupos de contenedores con el servicio Active Deploy (GUI)</a></li>
</ul>
</div>
</dd>
<dt class="dlterm"><span class="keyword">Alert Notification</span></dt>
<dd><p>Establezca políticas de notificación para filtrar sólo las alertas en las que esté interesado obtener de la aplicación. Puede acotar
los filtros de la política como sea necesario para especificar a personas o grupos como destinatarios de alertas, así como
la frecuencia y los métodos de notificación preferidos. </p>

<div class="p"><ul><li>Para obtener más información sobre cómo utilizar los contenedores con <span class="keyword">Alert Notification</span>, consulte <a href="container_integrations.html#container_alertnotification" title="Configure la app para enviar notificaciones cuando se cumpla una determinada condición o criterio y utilice el servicio de Alert Notification para gestionar las notificaciones de alerta. Con el servicio de Alert Notification, puede crear políticas de notificaciones personalizadas que filtran las alertas en las que está interesado. Puede acotar los filtros de la política como sea necesario para especificar a personas o grupos como destinatarios de alertas, así como la frecuencia y los métodos de notificación preferidos.">Configuración de alertas para apps que se despliegan en contenedores utilizando Alert Notification</a>.</li>
<li>Para obtener información general sobre el servicio de <span class="keyword">Alert Notification</span>, consulte <a href="../services/AlertNotification/index.html">Cómo empezar con
<span class="keyword">Alert Notification</span></a>.</li>
</ul>
</div>
</dd>
<dt class="dlterm"><span class="keyword">Delivery Pipeline</span></dt>
<dd><p>Automatice las compilaciones de las apps y los despliegues de contenedores en <span class="keyword">Bluemix</span> mediante <span class="keyword">Delivery Pipeline</span>, que forma parte de <span class="keyword">IBM
Bluemix Continuous Delivery</span>. </p>

<div class="p"><ul><li>Para obtener más información sobre cómo utilizar los contenedores con el conducto, consulte <a href="container_integrations.html#container_pipeline_ov" title="Automatice las compilaciones de las apps y los despliegues de los contenedores en Bluemix mediante Delivery Pipeline, que forma parte de IBM Bluemix Continuous Delivery.">Automatización de los despliegues de contenedor con Delivery Pipeline en el servicio Continuous Delivery</a>.</li>
<li>Para obtener información general sobre el servicio <span class="keyword">Delivery Pipeline</span>, consulte <a href="../services/ContinuousDelivery/pipeline_about.html">Iniciación a Delivery Pipeline</a>.</li>
</ul>
</div>
</dd>
<dt class="dlterm">UrbanCode Deploy</dt>
<dd><p>Gestione los releases y los despliegues de contenedor automáticos con IBM UrbanCode Deploy. Este servicio le proporciona herramientas que pueden utilizarse para tener visibilidad en los despliegues en todos los entornos. Puede utilizar este servicio como una alternativa al servicio
<span class="keyword">Delivery Pipeline</span>.</p>

<ul><li>Para obtener información de compra, consulte la página del producto para <a href="http://www.ibm.com/software/products/en/ucdep" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">IBM UrbanCode
Deploy</a>.</li>
<li>Para obtener información general sobre UrbanCode Deploy, consulte el <a href="http://www.ibm.com/support/knowledgecenter/SS4GSP/ucd_welcome.html" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">IBM Knowledge Center</a>.</li>
</ul>
</dd>
</dl>
</div>
</section><section role="region" aria-labelledby="d58943e387" id="container_integrations__integrate"><h2 class="sectiontitle" id="d58943e387">Integración de servicios</h2>
<div class="p"><dl><dt class="dlterm">Istio</dt>
<dd><p>Gestionar sus microservicios en <span class="keyword">IBM
Bluemix Container Service</span> para una aplicación o un servicio.
<span class="ph">Para obtener más información o involucrarse en el proyecto de código abierto de Istio, consulte <a href="https://istio.io/" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">https://istio.io/</a>.</span></p>
</dd>
<dt class="dlterm"><span class="keyword">Secure Gateway</span></dt>
<dd><p>Conecte de forma segura aplicaciones de <span class="keyword">Bluemix</span>
a ubicaciones remotas in situ o en la nube.</p>

<div class="p"><ul><li>Para obtener información sobre cómo utilizar <span class="keyword">IBM
Bluemix Container Service</span>
con <span class="keyword">Secure Gateway</span>, consulte <a href="../services/SecureGateway/sg_003.html#sg_003">Utilización de Docker como cliente</a>.</li>
<li>Para obtener información general sobre el servicio <span class="keyword">Secure Gateway</span>, consulte <a href="../services/SecureGateway/secure_gateway.html">Iniciación al servicio <span class="keyword">Secure Gateway</span></a>.</li>
</ul>
</div>

</dd>
</dl>
</div>
</section><section role="region" aria-labelledby="d58943e454" id="container_integrations__network"><h2 class="sectiontitle" id="d58943e454">Servicios de red</h2>
<div class="p"><dl><dt class="dlterm">VPN</dt>
<dd><p>Permitir que los contenedores se comuniquen entre sí entre un espacio de <span class="keyword">Bluemix</span> y un servidor de la intranet.</p>

<div class="p"><ul><li>Para obtener información general sobre el servicio <span class="keyword">IBM
VPN</span>, consulte <a href="../services/vpn/index.html">Iniciación al servicio <span class="keyword">IBM
VPN</span></a>.</li>
</ul>
</div>
</dd>
</dl>
</div>
</section><section role="region" aria-labelledby="d58943e487" id="container_integrations__security"><h2 class="sectiontitle" id="d58943e487">Servicios de seguridad</h2>
<div class="p"><dl><dt class="dlterm"><span class="keyword">Activity Tracker</span></dt>
<dd><p>Realizar la auditoría de llamadas de API para cualquier actividad anormal y para ayudarle a cumplir con los requisitos de auditoría normativos.</p>
</dd>
<dd class="ddexpand"><div class="p"><ul><li>Para obtener información general sobre el servicio <span class="keyword">Activity Tracker</span>, consulte <a href="../services/AccessTrail/index.html">Iniciación al servicio <span class="keyword">Activity Tracker</span></a>.</li>
</ul>
</div>
</dd>
</dl>
</div>
</section></div>
<article class="topic concept nested1" role="article" aria-labelledby="d58943e513" id="rellinks"><h2 class="topictitle2" id="d58943e513">Enlaces relacionados</h2>
<aside role="complementary" aria-labelledby="d58943e513">
<div class="linklist" id="general"><h3 class="linklistlabel">Enlaces relacionados</h3>
<ul><li><img src="./sout.gif" alt=""><a href="https://wiki.eclipse.org/Linux_Tools_Project/Docker_Tooling" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">Docker Tooling for Eclipse</a></li>
</ul></div>
</aside></article><article class="topic task nested1" role="article" aria-labelledby="d58943e523" lang="es-es" id="container_integrations_binding"><h2 class="topictitle2" id="d58943e523">Enlace de un servicio desde la interfaz gráfica de usuario (GUI) de <span class="keyword">Bluemix</span></h2>
<div class="body taskbody"><p class="shortdesc"><span class="keyword">IBM
Bluemix</span> tiene una lista de servicios y los gestiona en nombre de los desarrolladores de apps. Para añadir un servicio de <span class="keyword">Bluemix</span> para utilizar el contenedor, debe solicitar una instancia de este servicio y enlazarlo al contenedor.</p>
<div class="section prereq">Antes de empezar, añada el servicio al espacio de <span class="keyword">Bluemix</span>. Para obtener más información, consulte <a href="../services/reqnsi.html#req_instance">Solicitud de una instancia de servicio nueva</a>.</div><div class="section context"><div class="note restriction" id="container_integrations_binding__restriction"><span class="restrictiontitle">Restricción:</span> Algunos servicios de <span class="keyword">Bluemix</span> no dan soporte al enlace directo a un contenedor y generan un error durante la creación del contenedor. En este caso, enlace primero el servicio de <span class="keyword">Bluemix</span> a una app Cloud Foundry y, a continuación, enlace la app al contenedor. La app actúa como un puente entre el servicio y el contenedor. Para obtener más información, consulte <a href="container_troubleshoot.html#ts_bridge_app">El servicio de Bluemix no se enlaza directamente a un contenedor</a>.</div>
</div><ol class="steps"><li class="step"><span class="cmd">En el <span class="keyword wintitle">Catálogo</span> de <span class="keyword">Bluemix</span>, pulse
<span class="ph uicontrol">Contenedores</span>.</span></li>
<li class="step"><span class="cmd">Pulse una imagen de contenedor.</span></li>
<li class="step"><span class="cmd">Expanda <span class="ph uicontrol">Opciones avanzadas</span> y para <span class="ph uicontrol">Seleccione un servicio</span>,
seleccione un servicio de <span class="keyword">Bluemix</span> disponible.</span></li>
<li class="step"><span class="cmd">Pulse <span class="ph uicontrol">Añadir</span>.</span> El servicio de <span class="keyword">Bluemix</span> se visualiza en el campo <span class="ph uicontrol">Ya está enlazado a su contenedor</span>.</li>
<li class="step"><span class="cmd">Complete los demás campos y, a continuación, pulse <span class="ph uicontrol">CREAR</span>.</span></li>
<li class="step"><span class="cmd">Cuando se crea el contenedor, verifique que se visualiza la información de VCAP_SERVICES.</span> En el separador Visión general para el contenedor, localice el servicio de enlace y pulse <span class="ph uicontrol">Credenciales de vista</span>. La información que se visualiza es VCAP_SERVICES.</li>
</ol>
</div>
</article><article class="topic task nested1" role="article" aria-labelledby="d58943e679" lang="es-es" id="container_integrations_binding_cli"><h2 class="topictitle2" id="d58943e679">Enlace de un servicio a un contenedor desde la CLI</h2>
<div class="body taskbody"><p class="shortdesc"><span class="keyword">IBM
Bluemix</span> tiene una lista de servicios y los gestiona en nombre de los desarrolladores de apps. Para añadir un servicio de <span class="keyword">Bluemix</span> para utilizar el contenedor, debe solicitar una instancia de este servicio y enlazarlo al contenedor.</p>
<div class="section prereq">Antes de empezar, añada el servicio al espacio de <span class="keyword">Bluemix</span>. Para obtener más información, consulte <a href="../services/reqnsi.html#req_instance">Solicitud de una instancia de servicio nueva</a>.</div><div class="section context"><div class="note restriction" id="container_integrations_binding_cli__restriction"><span class="restrictiontitle">Restricción:</span> Algunos servicios de <span class="keyword">Bluemix</span> no dan soporte al enlace directo a un contenedor y generan un error durante la creación del contenedor. En este caso, enlace primero el servicio de <span class="keyword">Bluemix</span> a una app Cloud Foundry y, a continuación, enlace la app al contenedor. La app actúa como un puente entre el servicio y el contenedor. Para obtener más información, consulte <a href="container_troubleshoot.html#ts_bridge_app">El servicio de Bluemix no se enlaza directamente a un contenedor</a>.</div>
</div><ol class="steps"><li class="step stepexpand"><span class="cmd">Utilice uno de los siguientes mandatos para enlazar la instancia de servicio de <span class="keyword">Bluemix</span> a un contenedor nuevo.</span> <div class="note tip"><span class="tiptitle">Consejo:</span> <span class="ph">Ejecute <samp class="ph codeph"><span class="ph">bx ic</span> namespace-get</samp> para recuperar el espacio de nombres y sustituya <var class="keyword varname">&lt;my_namespace&gt;</var> por la información del espacio de nombres. </span></div>
<ul class="ul choices"><li class="li choice">Si está creando un único contenedor, utilice el mandato siguiente:<pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> run --name <var class="keyword varname">nombre_contenedor</var> -e "<var class="keyword varname">CCS_BIND_SRV</var>=<var class="keyword varname">instancia_servicio1</var>,<var class="keyword varname">instancia_servicio2</var>" registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">&lt;mi_espacio_nombres&gt;</var>/<var class="keyword varname">nombre_imagen</var></code></pre>
</li>
<li class="li choice">Si está creando un grupo de contenedores, utilice el mandato siguiente:<pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> group-create --name <var class="keyword varname">container_group_name</var> -e "<var class="keyword varname">CCS_BIND_SRV</var>=<var class="keyword varname">service_instance1</var>,<var class="keyword varname">service_instance2</var>" registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">&lt;my_namespace&gt;</var>/<var class="keyword varname">image_name</var></code></pre>
</li>
<li class="li choice">Si está enlazando un servicio al grupo de contenedores que ya se está ejecutando, utilice el mandato siguiente. Este mandato solo está disponible para grupos de contenedores. Solo se puede enlazar un servicio al mismo tiempo.<pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> service-bind <var class="keyword varname">container_group_name</var> <var class="keyword varname">service_instance</var></code></pre>
</li>
</ul>
</li>
<li class="step stepexpand"><span class="cmd">Utilice uno de los siguientes mandatos para verificar que la instancia del servicio está enlazada al contenedor.</span> <ul class="ul choices"><li class="li choice">Para un contenedor único, utilice el siguiente mandato.<pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> inspect CONTAINER</code></pre>
</li>
<li class="li choice">Para un grupo de contenedores, utilice el siguiente mandato.<pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> group-inspect GROUP</code></pre>
</li>
</ul>
Verifique que se visualiza la información VCAP_SERVICES para el servicio.
<pre class="codeblock"><code>{
 "VCAP_SERVICES": {
  "&lt;nombre_servicio&gt;": [
   {
    "credentials": {
     "hostname": "&lt;id_nombre_host&gt;",
     "jdbcUrl": "&lt;URL_jdbc&gt;",
     "name": "&lt;nombre_codificado&gt;",
     "password": "&lt;contraseña_codificada&gt;",
     "port": "&lt;número_puerto&gt;",
     "uri": "&lt;URI_servicio&gt;",
     "username": "&lt;nombre_usuario_codificado&gt;"
    },
    "label": "&lt;nombre_servicio&gt;",
    "name": "&lt;instancia_servicio&gt;",
    "plan": "&lt;nombre_plan&gt;",
    "tags": [
     "&lt;etiqueta1&gt;",
     "&lt;etiqueta2&gt;",
     "&lt;etiqueta3&gt;"
    ]
   } </code></pre>
</li>
</ol>
</div>
</article><article class="topic task nested1" role="article" aria-labelledby="d58943e878" lang="es-es" id="container_alertnotification"><h2 class="topictitle2" id="d58943e878">Configuración de alertas para apps que se despliegan en contenedores utilizando <span class="keyword">Alert Notification</span></h2>
<div class="body taskbody"><p class="shortdesc">Configure la app para enviar notificaciones cuando se cumpla una determinada condición o criterio y utilice
el servicio de <span class="keyword">Alert Notification</span> para gestionar
las notificaciones de alerta. Con el servicio de <span class="keyword">Alert Notification</span>, puede crear políticas
de notificaciones personalizadas que filtran las alertas en las que está interesado. Puede acotar
los filtros de la política como sea necesario para especificar a personas o grupos como destinatarios de alertas, así como
la frecuencia y los métodos de notificación preferidos.</p>
<div class="section prereq">Antes de empezar, revise el tema <a href="../services/reqnsi.html#req_instance">Solicitud de una nueva instancia de servicio</a> y cree una instancia del servicio de <span class="keyword">Alert Notification</span> en el espacio de <span class="keyword">Bluemix</span>. </div><div class="section context"><p>Los pasos siguientes muestran cómo crear un contenedor que ejecuta una app de nodo de ejemplo de <span class="keyword">Alert Notification</span>. Puede enviar alertas de prueba al servicio de <span class="keyword">Alert Notification</span> y revisarlas en la herramienta Visor de alertas. </p>
</div><ol class="steps"><li class="step stepexpand"><span class="cmd">Descargue y clone la <a href="https://github.com/IBM-Bluemix/alert-notification-helloworld" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">app Notificación de alerta</a> de ejemplo en la máquina local. </span> <pre class="codeblock"><code>git clone <span class="ph filepath">https://github.com/IBM-Bluemix/alert-notification-helloworld.git</span></code></pre>


<div class="steps note"><span class="notetitle">Nota:</span> Al clonar el proyecto Git, se creará una nueva carpeta denominada
<span class="ph filepath">alert-notification-helloworld</span> en la máquina local. </div>
</li>
<li class="step stepexpand"><span class="cmd">Cree una imagen de contenedor que incluya la app Notificación de alerta de ejemplo y envíela por push al registro de imágenes
privado de <span class="keyword">Bluemix</span>. </span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd"><a href="container_cli_cfic_install.html#container_cli_login" title="Después de instalar la CLI, inicie sesión para empezar a utilizarla.">Inicie sesión en la CLI de <span class="keyword">IBM
Bluemix Container Service</span></a>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Vaya al directorio <span class="ph filepath">alert-notification-helloworld</span>. </span></li>
<li class="li substep substepexpand"><span class="cmd">Cree la imagen de contenedor y envíela por push al registro de imágenes privado de <span class="keyword">Bluemix</span>. Ejecute <samp class="ph codeph"><span class="ph"><samp class="ph codeph">bx ic</samp></span> namespace-get</samp> para recuperar la información del espacio de nombres y reemplazar <var class="keyword varname">&lt;my_namespace&gt;</var> por su espacio de nombres.</span> <pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> build -t registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">&lt;mi_espacio_nombres&gt;</var>/alert .</code></pre>
</li>
<li class="li substep substepexpand"><span class="cmd">Verifique que la imagen del contenedor se haya creado y enviado por push correctamente. </span> <pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> images</code></pre>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Cree un contenedor de la imagen y enlace el servicio <span class="keyword">Alert Notification</span> al mismo. Sustituya
<var class="keyword varname">&lt;mi_espacio_nombres&gt;</var> por la información de espacio de nombres y
<var class="keyword varname">&lt;mi_alerta&gt;</var> por el nombre de la instancia del servicio Notificación de alerta que ha creado
al principio. </span> <pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> run --name alertcontainer -p 8080 -e "CCS_BIND_SRV=<var class="keyword varname">&lt;mi_alerta&gt;</var>" registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">&lt;mi_espacio_nombres&gt;</var>/alert</code></pre>
</li>
<li class="step stepexpand"><span class="cmd">Verifique que el contenedor esté en ejecución.</span> <pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span>ps</code></pre>
</li>
<li class="step stepexpand"><span class="cmd">Enlace una dirección IP pública al contenedor. </span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">Liste las direcciones IP públicas que están disponibles en el espacio y anote la dirección IP que desea
utilizar. </span> <pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> ips</code></pre>


<div class="note tip"><span class="tiptitle">Consejo:</span> Si no hay direcciones IP públicas disponibles en el espacio, ejecute <samp class="ph codeph"><span class="ph"><samp class="ph codeph">bx ic</samp></span> ip-request</samp> para solicitar una nueva dirección IP. También puede desenlazar una dirección IP utilizada de un contenedor mediante el mandato <samp class="ph codeph"><span class="ph"><samp class="ph codeph">bx ic</samp></span> unbind <var class="keyword varname">&lt;IP_ADDRESS&gt;</var>
<var class="keyword varname">&lt;CONTAINER&gt;</var></samp>.</div>
</li>
<li class="li substep substepexpand"><span class="cmd">Enlace la dirección IP pública al contenedor. Sustituya <var class="keyword varname">&lt;IP_ADDRESS&gt;</var> por
la dirección IP que ha anotado en el paso anterior. </span> <pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> ip-bind <var class="keyword varname">&lt;IP_ADDRESS&gt;</var> alertcontainer</code></pre>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Cree una alerta de prueba.</span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">Abra el navegador web.</span></li>
<li class="li substep substepexpand"><span class="cmd">Especifique el puerto y la dirección IP en el navegador web tal como se indica a continuación:
<samp class="ph codeph"><var class="keyword varname">&lt;IP_ADDRESS&gt;</var>:8080</samp>. </span> Se abrirá la página de bienvenida de la app web de <span class="keyword">Alert Notification</span>.
<p><img src="images/alertapp.png" width="400" alt="Pruebe su app web Notificación de alerta"></p>
</li>
<li class="li substep substepexpand"><span class="cmd">Pulse el botón <span class="ph uicontrol">Enviar alerta de ejemplo</span> para enviar una alerta de prueba al Visor de alertas.</span></li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Abra el <span class="keyword wintitle">Visor de alertas</span> y revise la alerta de prueba.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="cmd">En la interfaz gráfica de usuario de <span class="keyword">Bluemix</span>, seleccione la instancia de contenedor en ejecución. </span></li>
<li class="li substep"><span class="cmd">Pulse el servicio <span class="keyword">Alert Notification</span>
en los <span class="ph uicontrol">Servicios enlazados</span>.</span></li>
<li class="li substep"><span class="cmd">Pulse <span class="ph uicontrol">Iniciar</span> para abrir el Visor de alertas.</span></li>
<li class="li substep"><span class="cmd">Revise la alerta de prueba. </span></li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Explore las características del servicio de <span class="keyword">Alert Notification</span>.</span> Revise la documentación de <span class="keyword">Alert Notification</span>
para encontrar más información sobre cómo <a href="../services/AlertNotification/alert_configuring.html" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">crear políticas de notificación</a> y <a href="../services/AlertNotification/alert_viewer.html" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">gestionar las alertas</a>.</li>
</ol>
</div>
</article><article class="topic concept nested1" role="article" aria-labelledby="d58943e1205" lang="es-es" id="container_pipeline_ov"><h2 class="topictitle2" id="d58943e1205">Automatización de los despliegues de contenedor con <span class="keyword">Delivery Pipeline</span> en el servicio <span class="keyword">Continuous Delivery</span></h2>
<div class="body conbody"><p class="shortdesc">Automatice las compilaciones de las apps y los despliegues de los contenedores en <span class="keyword">Bluemix</span> mediante <span class="keyword">Delivery Pipeline</span>, que forma parte de <span class="keyword">IBM
Bluemix Continuous Delivery</span>.</p>
<div class="p"><span class="keyword">Delivery Pipeline</span> da soporte a lo siguiente:<ul><li>Compilación de imágenes de Docker</li>
<li>Despliegue de imágenes en contenedores de <span class="keyword">Bluemix</span></li>
</ul>
</div>
<div><p>Guía de inicio rápido para desplegar contenedores utilizando <span class="keyword">Delivery Pipeline</span>:</p>

<ol><li>Cree un repositorio Git que contenga el código.</li>
<li>Incluya un <samp class="ph codeph">Dockerfile</samp> en el directorio raíz del repositorio. </li>
<li>En el menú, pulse <span class="ph menucascade"><span class="ph uicontrol">Servicios</span> &gt; <span class="ph uicontrol">DevOps</span></span> y luego pulse <span class="ph uicontrol">Conductos</span>.</li>
<li>Pulse <span class="ph menucascade"><span class="ph uicontrol">Crear conducto</span> &gt; <span class="ph uicontrol"><span class="keyword">Delivery Pipeline</span></span></span>.</li>
<li>Pulse <span class="ph uicontrol">Crear</span>.</li>
<li>Añada el repositorio Git a la cadena de herramientas.<ol type="a" id="container_pipeline_ov__ol_mvk_s3v_vz"><li>Pulse <span class="ph uicontrol">Añadir una herramienta</span>.</li>
<li>Pulse el tipo de servicio Git que contiene el repositorio.</li>
<li>Especifique los detalles de configuración para el repositorio.</li>
<li>Pulse <span class="ph uicontrol">Crear integración</span>.</li>
</ol>
</li>
<li>En la página Visión general de la cadena de herramientas, pulse <span class="ph uicontrol"><span class="keyword">Delivery Pipeline</span></span>.</li>
<li>Cree una etapa de compilación que incluya un trabajo de compilación.<ol type="a" id="container_pipeline_ov__ol_pds_x3v_vz"><li>Pulse <span class="ph uicontrol">Añadir etapa</span>.</li>
<li>En el separador <span class="ph uicontrol">ENTRADA</span>, para el <span class="ph uicontrol">Tipo de entrada</span> seleccione <span class="ph uicontrol">Repositorio Git</span>.</li>
<li>En el separador <span class="ph uicontrol">TRABAJOS</span>, añada un trabajo de compilación. Para el <span class="ph uicontrol">Tipo de compilador</span>, seleccione <span class="ph uicontrol">IBM
Containers on <span class="keyword">Bluemix</span></span>.</li>
</ol>
</li>
<li>Cree una etapa de despliegue que incluya un trabajo de despliegue.<ol type="a" id="container_pipeline_ov__ol_ahk_djv_vz"><li>En el separador <span class="ph uicontrol">ENTRADA</span>, para el <span class="ph uicontrol">Tipo de entrada</span> seleccione <span class="ph uicontrol">Artefactos de compilación</span>.</li>
<li>En el separador <span class="ph uicontrol">TRABAJOS</span>, para el <span class="ph uicontrol">Tipo de desplegador</span> seleccione <span class="ph uicontrol">IBM Container Service for Bluemix</span>.</li>
</ol>
</li>
<li>Ejecute un despliegue mediante la transferencia de un cambio de código o bien pulsando el icono Ejecutar etapa de la etapa de compilación de <span class="keyword">Delivery Pipeline</span>.</li>
</ol>
</div><div>¿Necesita más información? Consulte los siguientes temas.<ul><li><a href="container_integrations.html#container_single_pipeline_ov" title="Automatice la compilación y el despliegue de los contenedores únicos con Delivery Pipeline.">Creación de un único contenedor mediante Delivery Pipeline</a></li>
<li><a href="container_integrations.html#container_group_pipeline_ov" title="Automatice la compilación y el despliegue de los grupos de contenedores mediante Delivery Pipeline.">Creación de grupos de contenedores mediante Delivery Pipeline</a></li>
</ul>
</div></div>
<article class="topic task nested2" role="article" aria-labelledby="d58943e1438" lang="es-es" id="container_single_pipeline_ov"><h3 class="topictitle3" id="d58943e1438">Creación de un único contenedor mediante <span class="keyword">Delivery Pipeline</span></h3>
<div class="body taskbody"><p class="shortdesc">Automatice la compilación y el despliegue de los contenedores únicos con <span class="keyword">Delivery Pipeline</span>.</p>
</div>
<article class="topic task nested3" role="article" aria-labelledby="d58943e1498" lang="es-es" id="container_single_pipeline_build"><h4 class="topictitle4" id="d58943e1498">Creación de etapas de compilación para contenedores mediante <span class="keyword">Delivery Pipeline</span></h4>
<div class="body taskbody"><p class="shortdesc"><span class="keyword">IBM
Bluemix Container Service</span> incluye
un servicio de compilación que acepta código fuente y, a continuación, crea y publica
una imagen Docker en el registro de contenedores. <span class="keyword">Delivery Pipeline</span>,
que forma parte de <span class="keyword">IBM
Bluemix Continuous Delivery</span>, proporciona un trabajo de compilación que utiliza el servicio de compilación de contenedores. Este trabajo de compilación
toma el código fuente de un repositorio, compila una imagen de Docker a partir
de dicho código, versiona (etiquetas) dicha imagen para hacer coincidir el número de compilación y, a continuación,
envía la imagen resultante al registro de <span class="keyword">IBM
Bluemix Container Service</span> de la organización en <span class="keyword">Bluemix</span>. A continuación, los miembros de la organización pueden desplegar la imagen resultante a
espacios dentro de la organización.</p>
<div class="section prereq" id="container_single_pipeline_build__prereq"> <div class="p">Antes de empezar, tenga en cuenta la siguiente información. <ul><li>Para obtener más información sobre compilaciones, etapas y la funcionalidad básica de un conducto, consulte el tema <a href="../services/ContinuousDelivery/pipeline_about.html">Acerca de <span class="keyword">Delivery Pipeline</span></a> de la documentación de <span class="keyword">Continuous Delivery</span>.</li>
<li>Identifique una imagen existente del registro de imágenes privado de la organización para utilizarla en el contenedor;
para ello, compruebe el <span class="keyword wintitle">Catálogo</span> de <span class="keyword">Bluemix</span>.</li>
<li>Si sabe que desea enlazar un servicio al contenedor, cree una app para utilizarla como puente.
Para más información, consulte <a href="container_integrations.html#unique_998271710" title="Los servicios no se pueden enlazar directamente a un contenedor. Como alternativa, puede enlazar el servicio a una app y esta al contenedor configurando una propiedad de entorno en una fase de conducto. La app sirve como puente entre el servicio y el contenedor.">Enlace de un servicio a un contenedor mediante <span class="keyword">Delivery Pipeline</span></a>.</li>
</ul>
</div>
 </div><p class="li stepsection">Compilar una imagen de Docker desde <span class="keyword">Delivery Pipeline</span>.</p><ol class="steps" id="container_single_pipeline_build__steps"><li class="step stepexpand"><span class="cmd">Crear un Dockerfile en el directorio raíz del repositorio Git que está asociado a su cadena de herramientas y confírmelo en el repositorio.</span></li>
<li class="step stepexpand"><span class="cmd">En la página Visión general de la cadena de herramientas, pulse <span class="ph uicontrol"><span class="keyword">Delivery Pipeline</span></span>.</span></li>
<li class="step stepexpand"><span class="cmd">Cree una etapa de compilación.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="cmd">Pulse <span class="ph uicontrol">Añadir etapa</span>.</span></li>
<li class="li substep"><span class="cmd">Dé un nombre a la etapa. </span> Por ejemplo, <samp class="ph codeph"><var class="keyword varname">Build</var></samp>.</li>
<li class="li substep"><span class="cmd">Para el <span class="ph uicontrol">Tipo de entrada</span>, seleccione <span class="ph uicontrol">Repositorio Git</span>.</span></li>
<li class="li substep"><span class="cmd">Para el resto de los campos, compruebe los valores y actualice, si es necesario.</span></li>
<li class="li substep"><span class="cmd">Pulse el separador <span class="ph uicontrol">TRABAJOS</span>.</span></li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">En la etapa de compilación, cree un trabajo de compilación.</span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">En el separador <span class="ph uicontrol">TRABAJOS</span>, pulse <span class="ph uicontrol">AÑADIR TRABAJO</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Seleccione el tipo de trabajo <span class="ph uicontrol">Compilar</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el <span class="ph uicontrol">Tipo de compilador</span>, seleccione <span class="ph uicontrol">IBM
Containers on <span class="keyword">Bluemix</span></span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Si es necesario, actualice el destino, la organización y el espacio de <span class="keyword">Bluemix</span>. </span></li>
<li class="li substep substepexpand"><span class="cmd">Para <span class="ph uicontrol">Utilizar capas de memoria caché</span>, borre el campo cuando deba forzar una renovación de
capas que envían contenido de forma dinámica desde otras fuentes. </span> <p>Por ejemplo, si el <samp class="ph codeph">Dockerfile</samp> incluye
un mandato <samp class="ph codeph">apt-get install</samp> o <samp class="ph codeph">wget</samp>,
asegúrese de que estas dependencias dinámicas recopilan cada compilación desmarcando el recuadro de selección <span class="ph uicontrol">Utilizar capas de memoria caché</span>. </p>
 <div class="steps note"><span class="notetitle">Nota:</span> Cuando se desmarca el campo <span class="ph uicontrol">Utilizar capas de memoria caché</span>, los tiempos de compilación son mayores
porque las capas almacenadas en memoria caché no se utilizan cuando se está compilando la imagen.</div>
</li>
<li class="li substep substepexpand"><span class="cmd">En el campo <span class="ph uicontrol">Nombre de imagen</span>,
especifique un nombre para la imagen que desea compilar. Para satisfacer los convenios de denominación de Docker,
utilice solamente minúsculas, números y guiones (-). </span> La imagen compilada resultante se etiqueta con el nombre de la imagen y el número de compilación.  Por
ejemplo, si especifica el nombre de imagen <samp class="ph codeph">myappimage</samp>,
la imagen resultante para el número de compilación 4 se denominará <samp class="ph codeph">myappimage:4</samp>. </li>
<li class="li substep substepexpand"><span class="cmd">Si el Dockerfile no se encuentra en el directorio raíz del proyecto, vaya a la sección Compilar script y añada la vía de acceso al Dockerfile en las siguientes ubicaciones.</span> <ol type="i"><li>Antes de la sección Ejecutar pruebas de unidad, añada el nombre de la carpeta con un mandato de cambio de directorio.<div class="p"><pre class="codeblock"><code>cd <var class="keyword varname">&lt;carpeta&gt;</var></code></pre>
</div>
</li>
<li>Añada el nombre de la carpeta siempre que se muestre la variable <var class="keyword varname">${WORKSPACE}</var>. La variable
<var class="keyword varname">${WORKSPACE}</var> detecta automáticamente el directorio raíz del proyecto.<div class="p">Ejemplo<pre class="codeblock"><code>BUILD_COMMAND="build --pull --tag ${FULL_REPOSITORY_NAME} ${WORKSPACE}/<var class="keyword varname">&lt;carpeta&gt;</var>"</code></pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
<li class="step stepexpand"><span class="cmd">Pulse el icono <span class="ph uicontrol">Ejecutar etapa</span> para verificar que la etapa se cree sin
errores.</span> Si la compilación falla, revise los registros y corrija los errores. Si la etapa pasa, compruebe el registro de
imágenes de la organización y verifique que se haya compilado la imagen.</li>
</ol>
</div>
</article><article class="topic task nested3" role="article" aria-labelledby="d58943e1798" lang="es-es" id="container_pipeline_vulnerability"><h4 class="topictitle4" id="d58943e1798">(Opcional) Comprobación de la seguridad de las imágenes como parte del conducto</h4>
<div class="body taskbody"><div class="abstract"><span class="shortdesc">Detecte problemas de seguridad o de configuración en su imagen antes de desplegar el contenedor mediante
Vulnerability Advisor.</span>
</div>
<div class="section context"><div class="p">Configuración de conducto común que incluye esta exploración:<ul><li>Etapa de compilación para compilar los archivos de origen</li>
<li>Etapa de proceso, que incluye los siguientes trabajos: <ul><li>Un trabajo de compilación para ejecutar una compilación del contenedor</li>
<li>Un trabajo de prueba para ejecutar Vulnerability Advisor en una imagen</li>
</ul>
</li>
<li>Etapa de despliegue para desplegar el contenedor</li>
</ul>
</div>

<div class="note tip"><span class="tiptitle">Consejo:</span> Esta tarea describe cómo crear un trabajo de prueba para Vulnerability Advisor en una
fase distinta que el trabajo que crea la imagen del contenedor. Como alternativa, puede utilizar la misma
fase. Si decide crear una fase distinta, no es necesario que defina la variable de entorno. </div>
</div><p class="li stepsection">Crear la exploración de Vulnerability Advisor.</p><ol class="steps" id="container_pipeline_vulnerability__steps"><li class="step stepexpand"><span class="cmd">Cree una etapa de proceso.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="cmd">Pulse <span class="ph uicontrol">Añadir etapa</span>.</span></li>
<li class="li substep"><span class="cmd">Dé un nombre a la etapa. </span> Por ejemplo, <samp class="ph codeph"><var class="keyword varname">Proceso</var></samp>. </li>
<li class="li substep"><span class="cmd">Para el tipo de entrada, seleccione <span class="ph uicontrol">Artefactos de compilación</span>.</span></li>
<li class="li substep"><span class="cmd">Para la fase y el trabajo, verifique los valores y la actualización,
si es necesario.</span></li>
<li class="li substep"><span class="cmd">Pulse el separador <span class="ph uicontrol">TRABAJOS</span>.</span></li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">En la etapa de proceso, añada un trabajo de prueba para ejecutar la exploración del código.</span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">En el separador <span class="ph uicontrol">TRABAJOS</span>, pulse <span class="ph uicontrol">AÑADIR TRABAJO</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el tipo de trabajo, seleccione <span class="ph uicontrol">Prueba</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para <span class="ph uicontrol">Tipo de probador</span>, seleccione <span class="ph uicontrol">IBM Vulnerability
Advisor</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Si es necesario, actualice el destino, la organización y el espacio de <span class="keyword">Bluemix</span>. </span></li>
<li class="li substep substepexpand"><span class="cmd">Para <span class="ph uicontrol">Minutos que se debe esperar para que el análisis se complete</span>,
especifique un valor de 0 a 59 minutos.</span> El valor predeterminado es <var class="keyword varname">5</var> minutos. Al final del trabajo, se proporciona un URL para el panel de control en los registros de la consola. 
<p>Si la exploración no finaliza antes de que transcurra este tiempo, el trabajo falla, pero el análisis de exploración continúa ejecutándose y se puede ver en el panel de control. Una vez que se haya completado la exploración de, si vuelve a ejecutar el trabajo, la solicitud de exploración no se volverá a enviar
y el trabajo de conducto puede completarse satisfactoriamente. Como alternativa, puede
configurar el conducto para que no esté bloqueada en un resultado de exploración satisfactorio,
que se describe en el paso siguiente. </p>
</li>
<li class="li substep substepexpand"><span class="cmd">Para determinar el comportamiento en el tiempo de espera excedido, seleccione o desmarque el recuadro de selección <span class="ph uicontrol">Dejar de ejecutar esta etapa si el trabajo falla</span>.</span> <p>Puede
configurar el trabajo para bloquear la ejecución de los trabajos posteriores de la etapa y de etapas posteriores
si este trabajo falla, o puede configurar la etapa
para continuar sin bloquear etapas ni trabajos posteriores.
El estado del trabajo está determinado por la existencia de grandes problemas de seguridad. </p>


<p>Los grandes problemas de seguridad provocan que el trabajo falle. En función de la selección para <span class="ph uicontrol">Dejar de ejecutar esta etapa si el trabajo falla</span>, un trabajo
fallido detiene el proceso de la etapa y del conducto o
les permite continuar. Si sabe que el informe incluye muchos
problemas para procesar, puede configurar la etapa para continuar porque
la exploración puede tardar bastante tiempo. En este caso de ejemplo, es posible que no desee
que se detenga el resto de los trabajos y etapas sólo porque la exploración está tardando
demasiado tiempo.</p>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Si el trabajo se encuentra en la misma etapa que el trabajo de creación, establezca una variable de entorno para el
nombre de repositorio.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="cmd">Pulse el separador <span class="ph uicontrol">PROPIEDADES DE ENTORNO</span>.</span></li>
<li class="li substep"><span class="cmd">Pulse <span class="ph uicontrol">AÑADIR PROPIEDAD</span> y seleccione <span class="ph uicontrol">Propiedad de texto</span>.</span></li>
<li class="li substep"><span class="cmd">En el campo <span class="ph uicontrol">Nombre</span>, escriba <samp class="ph codeph">FULL_REPOSITORY_NAME</samp></span></li>
<li class="li substep"><span class="cmd">En el campo <span class="ph uicontrol">Valor</span>, no especifique nada.</span> El nombre de la imagen que se especifica en el trabajo de creación del contenedor se pasa a través de esta variable de entorno.</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
<li class="step stepexpand"><span class="cmd">Pulse el icono <span class="ph uicontrol">Ejecutar etapa</span> para verificar que la etapa se cree sin
errores.</span></li>
</ol>
<div class="section result"><div class="p">Para ver los resultados de una exploración de Vulnerability Advisor, una vez finalizado el trabajo, pulse <span class="ph uicontrol">Ver resultados e historial</span>. En el separador <span class="ph uicontrol">REGISTROS</span>, busque la siguiente sección:<pre class="pre msgblock"><code>Se han encontrado resultados de vulnerabilidad de image registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">espacio_nombres</var>/<var class="keyword varname">imagen</var></code></pre>
</div>

<p>Se enumera una lista de paquetes vulnerables, problemas de seguridad y mejoras sugeridas, según se
describe en el tema de Vulnerability Advisor <a href="va/va_index.html#va_reviewing">Revisión de un informe de imágenes</a>. Se proporciona el código del Dockerfile para resolver algunos
problemas comunes al <a href="va/va_index.html#va_report">Resolver problemas en imágenes</a>.</p>
</div></div>
</article><article class="topic task nested3" role="article" aria-labelledby="d58943e2075" lang="es-es" id="container_pipeline_cleanup"><h4 class="topictitle4" id="d58943e2075">(Opcional) Limpieza de imágenes con <span class="keyword">Delivery Pipeline</span></h4>
<div class="body taskbody"><p class="shortdesc">El trabajo de compilación de servicio <span class="keyword">IBM
Bluemix Container Service</span> limpia
automáticamente versiones de imágenes no utilizadas. Las imágenes que se están utilizando no se eliminarán. Puede especificar un
número de versiones de imágenes para guardar o puede inhabilitar la limpieza de imágenes.</p>
<p class="li stepsection">Para cambiar el número de versiones de imágenes que se guardan para un proyecto:</p><ol class="steps"><li class="step"><span class="cmd">En el conducto, abra el archivo de configuración para la etapa de compilación.</span></li>
<li class="step"><span class="cmd">En el separador <span class="ph uicontrol">PROPIEDADES DE ENTORNO</span>, pulse <span class="ph uicontrol">AÑADIR PROPIEDAD</span>.</span></li>
<li class="step"><span class="cmd">Seleccione <span class="ph uicontrol">Propiedades de texto</span>.</span></li>
<li class="step"><span class="cmd">En el campo <span class="ph uicontrol">Nombre</span>, escriba el mandato <samp class="ph codeph">IMAGE_LIMIT</samp>.</span></li>
<li class="step"><span class="cmd">En el campo <span class="ph uicontrol">Valor</span>, escriba el número de versiones de imágenes a guardar en el registro para este proyecto. De forma predeterminada, se conservarán las cinco versiones de imágenes más recientes para un proyecto. Para
inhabilitar la limpieza de imágenes y guardar todas las versiones de imágenes, establezca el valor en
<samp class="ph codeph">-1</samp>.</span></li>
<li class="step"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
</ol>
</div>
</article><article class="topic task nested3" role="article" aria-labelledby="d58943e2210" lang="es-es" id="container_binding_pipeline"><h4 class="topictitle4" id="d58943e2210">(Opcional) Enlace de un servicio a un contenedor mediante <span class="keyword">Delivery Pipeline</span></h4>
<div class="body taskbody"><p class="shortdesc">Los servicios no se pueden enlazar directamente a un contenedor. Como alternativa, puede enlazar el servicio a una app y esta al contenedor configurando una propiedad de entorno en una fase de conducto. La app sirve como puente entre el servicio y el contenedor.</p>
<div class="section prereq"><p id="container_binding_pipeline__context"><span class="keyword">Bluemix</span> proporciona un conjunto de variables de entorno que definen los nombres y los detalles de los servicios enlazados a una app, como por ejemplo la base de datos SQL de ClearDB o Preguntas y respuestas. Estas variables de entorno se denominan <samp class="ph codeph">VCAP_SERVICES</samp>. Cuando se enlaza un contenedor a un servicio, los <samp class="ph codeph">VCAP_SERVICES</samp> se pasan en el contenedor como una variable de entorno a través de una app que actúa como puente entre el contenedor y el servicio. Luego el contenedor puede buscar información del servicio, como por ejemplo el punto final, el usuario y la contraseña.</p>

<p>Antes de configurar la propiedad del entorno, identifique una app existente que tenga servicios enlazados o bien cree una app mediante la interfaz gráfica de usuario de <span class="keyword">Bluemix</span> o la línea de mandatos. Para obtener más información, consulte <a href="container_troubleshoot.html#ts_bridge_app">El servicio de Bluemix no se enlaza directamente a un contenedor</a>.</p>
</div><p class="li stepsection">Enlace la app puente al contenedor.</p><ol class="steps"><li class="step"><span class="cmd">En la página Visión general de la cadena de herramientas, pulse <span class="ph uicontrol"><span class="keyword">Delivery Pipeline</span></span>.</span></li>
<li class="step"><span class="cmd">Abra una etapa de conducto y pulse el separador <span class="ph uicontrol">PROPIEDADES DE ENTORNO</span>.</span></li>
<li class="step"><span class="cmd">Pulse <span class="ph uicontrol">AÑADIR PROPIEDAD</span> y seleccione <span class="ph uicontrol">Propiedad de texto</span>.</span></li>
<li class="step"><span class="cmd">En el campo <span class="ph uicontrol">Nombre</span>, escriba el mandato <kbd class="ph userinput">BIND_TO</kbd>.</span></li>
<li class="step"><span class="cmd">En el campo <span class="ph uicontrol">Valor</span>, especifique el nombre de la app puente, como por ejemplo <var class="keyword varname">pipeline_bridge_app</var>.</span></li>
<li class="step"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
<li class="step"><span class="cmd">Pruebe la configuración ejecutando el conducto.</span></li>
</ol>
<div class="section postreq"><div class="note tip"><span class="tiptitle">Consejo:</span> Después de que la app de puente se enlace con un contenedor, no la elimine. Si suprime una app de puente enlazada, el contenedor se colgará. Suprima el contenedor, y
el resto de los contenedores que utilizan la app de puente, antes de suprimir
la app de puente.</div>
</div></div>
</article><article class="topic task nested3" role="article" aria-labelledby="d58943e2369" lang="es-es" id="container_single_pipeline_deploy"><h4 class="topictitle4" id="d58943e2369">Creación de etapas de despliegue para contenedores con <span class="keyword">Delivery Pipeline</span></h4>
<div class="body taskbody"><p class="shortdesc">Puede crear una etapa de despliegue para el contenedor utilizando <span class="keyword">Delivery Pipeline</span>.</p>
<div class="section prereq"><div class="p">Antes de empezar:<ul><li><a href="container_integrations.html#container_single_pipeline_build" title="IBM Bluemix Container Service incluye un servicio de compilación que acepta código fuente y, a continuación, crea y publica una imagen Docker en el registro de contenedores. Delivery Pipeline, que forma parte de IBM Bluemix Continuous Delivery, proporciona un trabajo de compilación que utiliza el servicio de compilación de contenedores. Este trabajo de compilación toma el código fuente de un repositorio, compila una imagen de Docker a partir de dicho código, versiona (etiquetas) dicha imagen para hacer coincidir el número de compilación y, a continuación, envía la imagen resultante al registro de IBM Bluemix Container Service de la organización en Bluemix. A continuación, los miembros de la organización pueden desplegar la imagen resultante a espacios dentro de la organización.">Cree una etapa de compilación</a>.</li>
<li><a href="https://github.com/Osthanes/deployscripts/blob/master/deploycontainer.sh" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">Revise el script de despliegue predeterminado para contenedores únicos</a>.
Puede bifurcar el script predeterminado y editarlo o, si no, crear su propio script para usarlo.</li>
<li><a href="../services/ContinuousDelivery/pipeline_deploy_var.html">Revise una lista de variables de entorno disponibles suministradas por el servicio <span class="keyword">Delivery Pipeline</span></a>.</li>
</ul>
</div>
</div><ol class="steps"><li class="step stepexpand"><span class="cmd">En la página Visión general de la cadena de herramientas, pulse <span class="ph uicontrol"><span class="keyword">Delivery Pipeline</span></span>.</span></li>
<li class="step stepexpand" id="container_single_pipeline_deploy__deploy_stage"><span class="cmd">Cree una etapa de despliegue.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="cmd">Pulse <span class="ph uicontrol">AÑADIR ETAPA</span>.</span></li>
<li class="li substep"><span class="cmd">Dé un nombre a la etapa. </span> Por ejemplo, <samp class="ph codeph"><var class="keyword varname">Desplegar</var></samp>.</li>
<li class="li substep"><span class="cmd">Para el tipo de entrada, seleccione <span class="ph uicontrol">Artefactos de compilación</span>.</span></li>
</ol>
</li>
<li class="step stepexpand" id="container_single_pipeline_deploy__deployment_job"><span class="cmd">En la etapa, cree un trabajo de despliegue.</span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">En el separador <span class="ph uicontrol">TRABAJOS</span>, pulse <span class="ph uicontrol">AÑADIR TRABAJO</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el tipo de trabajo, seleccione <span class="ph uicontrol">Despliegue</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el tipo de desplegador, seleccione <span class="ph uicontrol">Servicio IBM Container de <span class="keyword">Bluemix</span></span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para la organización y el espacio, verifique los valores y la actualización,
si es necesario.</span></li>
<li class="li substep substepexpand"><span class="cmd">En el campo <span class="ph uicontrol">Estrategia de despliegue</span>, especifique
uno de los valores siguientes.</span> <ul><li><span class="ph uicontrol">red_black</span> - Despliega una nueva versión de la app. Si el despliegue es satisfactorio, se elimina el despliegue previo de la app y la ruta o dirección IP se asigna a la nueva versión.</li>
<li><span class="ph uicontrol">clean</span>: elimina todos los despliegues anteriores de la aplicación. </li>
</ul>
 <div class="note tip"><span class="tiptitle">Consejo:</span> La propiedad de entorno <samp class="ph codeph">CONCURRENT_VERSIONS</samp>
establece el número de versiones de los despliegues de la app a mantener
activas. El valor predeterminado es una versión. Por ejemplo, si <samp class="ph codeph">CONCURRENT_VERSIONS</samp> está establecido en 2, y va a usar una dirección IP, el despliegue más reciente estará enlazado con la dirección IP, pero la versión anterior sigue desplegándose para un modo de espera rápido. 
<p>Para eliminar siempre todos los despliegues de la app,
en el separador <span class="ph uicontrol">PROPIEDADES DE ENTORNO</span>, puede establecer
<samp class="ph codeph">CONCURRENT_VERSIONS</samp> en <samp class="ph codeph">0</samp>.</p>
</div>
</li>
<li class="li substep substepexpand"><span class="cmd">En el campo <span class="ph uicontrol">Nombre</span>, especifique el nombre
del contenedor que desea desplegar.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el puerto, especifique el puerto publicado
para el contenedor.</span> Separe varios puertos con una
coma (,).
<div class="note tip" id="container_single_pipeline_deploy__private_container"><span class="tiptitle">Consejo:</span> Si no se ha especificado ningún puerto y va a utilizar el script de despliegue predeterminado, el puerto 80 se publica automáticamente. Para convertir un contenedor en privado con el script de despliegue predeterminado, lleve a cabo los siguientes pasos.
<ol type="i"><li>Para la estrategia de despliegue, especifique <kbd class="ph userinput">simple</kbd>.</li>
<li> Deje el campo <span class="ph uicontrol">Puerto</span> en blanco.</li>
<li>Como los despliegues simples no limpian los despliegues anteriores, puede crear otra etapa de despliegue para limpiarlos. Establezca la <span class="ph uicontrol">Estrategia de despliegue</span> de la segunda etapa de despliegue en <kbd class="ph userinput">limpiar</kbd>.</li>
</ol>
</div>
</li>
<li class="li substep substepexpand"><span class="cmd">Si tiene argumentos de despliegue opcionales, especifíquelos.</span> Por ejemplo,
si la app requiere una variable de entorno para la ubicación de la base de datos
de fondo, puede incluir esta línea:

<pre class="codeblock"><code>--env MY_DB_HOSTNAME_PROPERTY=<var class="keyword varname">mydbhostname</var></code></pre>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Si ha creado su propio script de despliegue, edite la sección <span class="ph uicontrol">Script del desplegador</span> para usarlo.</span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">Copie la siguiente línea y actualícela para usar su repositorio.</span> <pre class="pre screen"><code>git_retry clone https://github.com/Osthanes/deployscripts.git deployscripts</code></pre>
</li>
<li class="li substep substepexpand"><span class="cmd">Edite la siguiente línea para usar el script.</span> <pre class="pre screen"><code>/bin/bash deployscripts/deploycontainer.sh</code></pre>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
</ol>
</div>
</article></article><article class="topic task nested2" role="article" aria-labelledby="d58943e2645" lang="es-es" id="container_group_pipeline_ov"><h3 class="topictitle3" id="d58943e2645">Creación de grupos de contenedores mediante <span class="keyword">Delivery Pipeline</span></h3>
<div class="body taskbody"><p class="shortdesc">Automatice la compilación y el despliegue de los grupos de contenedores mediante <span class="keyword">Delivery Pipeline</span>.</p>
</div>
<article class="topic task nested3" role="article" aria-labelledby="d58943e2711" lang="es-es" id="container_group_pipeline_build"><h4 class="topictitle4" id="d58943e2711">Creación de etapas de compilación para grupos de contenedores utilizando <span class="keyword">Delivery Pipeline</span></h4>
<div class="body taskbody"><p class="shortdesc"><span class="keyword">IBM
Bluemix Container Service</span> incluye
un servicio de compilación que acepta código fuente y, a continuación, crea y publica
una imagen Docker en el registro de contenedores. <span class="keyword">Delivery Pipeline</span>,
que forma parte de <span class="keyword">IBM
Bluemix Continuous Delivery</span>, proporciona un trabajo de compilación que utiliza el servicio de compilación de contenedores. Este trabajo de compilación
toma el código fuente de un repositorio, compila una imagen de Docker a partir
de dicho código, versiona (etiquetas) dicha imagen para hacer coincidir el número de compilación y, a continuación,
envía la imagen resultante al registro de <span class="keyword">IBM
Bluemix Container Service</span> de la organización en <span class="keyword">Bluemix</span>. A continuación, los miembros de la organización pueden desplegar la imagen resultante a
espacios dentro de la organización.</p>
<div class="section prereq"> <div class="p">Antes de empezar, tenga en cuenta la siguiente información. <ul><li>Para obtener más información sobre compilaciones, etapas y la funcionalidad básica de un conducto, consulte el tema <a href="../services/ContinuousDelivery/pipeline_about.html">Acerca de <span class="keyword">Delivery Pipeline</span></a> de la documentación de <span class="keyword">Continuous Delivery</span>.</li>
<li>Identifique una imagen existente del registro de imágenes privado de la organización para utilizarla en el contenedor;
para ello, compruebe el <span class="keyword wintitle">Catálogo</span> de <span class="keyword">Bluemix</span>.</li>
<li>Si sabe que desea enlazar un servicio al contenedor, cree una app para utilizarla como puente.
Para más información, consulte <a href="container_integrations.html#unique_998271710" title="Los servicios no se pueden enlazar directamente a un contenedor. Como alternativa, puede enlazar el servicio a una app y esta al contenedor configurando una propiedad de entorno en una fase de conducto. La app sirve como puente entre el servicio y el contenedor.">Enlace de un servicio a un contenedor mediante <span class="keyword">Delivery Pipeline</span></a>.</li>
</ul>
</div>
 </div><p class="li stepsection">Compilar una imagen de Docker desde <span class="keyword">Delivery Pipeline</span>.</p><ol class="steps"><li class="step stepexpand"><span class="cmd">Crear un Dockerfile en el directorio raíz del repositorio Git que está asociado a su cadena de herramientas y confírmelo en el repositorio.</span></li>
<li class="step stepexpand"><span class="cmd">En la página Visión general de la cadena de herramientas, pulse <span class="ph uicontrol"><span class="keyword">Delivery Pipeline</span></span>.</span></li>
<li class="step stepexpand"><span class="cmd">Cree una etapa de compilación.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="cmd">Pulse <span class="ph uicontrol">Añadir etapa</span>.</span></li>
<li class="li substep"><span class="cmd">Dé un nombre a la etapa. </span> Por ejemplo, <samp class="ph codeph"><var class="keyword varname">Build</var></samp>.</li>
<li class="li substep"><span class="cmd">Para el <span class="ph uicontrol">Tipo de entrada</span>, seleccione <span class="ph uicontrol">Repositorio Git</span>.</span></li>
<li class="li substep"><span class="cmd">Para el resto de los campos, compruebe los valores y actualice, si es necesario.</span></li>
<li class="li substep"><span class="cmd">Pulse el separador <span class="ph uicontrol">TRABAJOS</span>.</span></li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">En la etapa de compilación, cree un trabajo de compilación.</span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">En el separador <span class="ph uicontrol">TRABAJOS</span>, pulse <span class="ph uicontrol">AÑADIR TRABAJO</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Seleccione el tipo de trabajo <span class="ph uicontrol">Compilar</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el <span class="ph uicontrol">Tipo de compilador</span>, seleccione <span class="ph uicontrol">IBM
Containers on <span class="keyword">Bluemix</span></span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Si es necesario, actualice el destino, la organización y el espacio de <span class="keyword">Bluemix</span>. </span></li>
<li class="li substep substepexpand"><span class="cmd">Para <span class="ph uicontrol">Utilizar capas de memoria caché</span>, borre el campo cuando deba forzar una renovación de
capas que envían contenido de forma dinámica desde otras fuentes. </span> <p>Por ejemplo, si el <samp class="ph codeph">Dockerfile</samp> incluye
un mandato <samp class="ph codeph">apt-get install</samp> o <samp class="ph codeph">wget</samp>,
asegúrese de que estas dependencias dinámicas recopilan cada compilación desmarcando el recuadro de selección <span class="ph uicontrol">Utilizar capas de memoria caché</span>. </p>
 <div class="steps note"><span class="notetitle">Nota:</span> Cuando se desmarca el campo <span class="ph uicontrol">Utilizar capas de memoria caché</span>, los tiempos de compilación son mayores
porque las capas almacenadas en memoria caché no se utilizan cuando se está compilando la imagen.</div>
</li>
<li class="li substep substepexpand"><span class="cmd">En el campo <span class="ph uicontrol">Nombre de imagen</span>,
especifique un nombre para la imagen que desea compilar. Para satisfacer los convenios de denominación de Docker,
utilice solamente minúsculas, números y guiones (-). </span> La imagen compilada resultante se etiqueta con el nombre de la imagen y el número de compilación.  Por
ejemplo, si especifica el nombre de imagen <samp class="ph codeph">myappimage</samp>,
la imagen resultante para el número de compilación 4 se denominará <samp class="ph codeph">myappimage:4</samp>. </li>
<li class="li substep substepexpand"><span class="cmd">Si el Dockerfile no se encuentra en el directorio raíz del proyecto, vaya a la sección Compilar script y añada la vía de acceso al Dockerfile en las siguientes ubicaciones.</span> <ol type="i"><li>Antes de la sección Ejecutar pruebas de unidad, añada el nombre de la carpeta con un mandato de cambio de directorio.<div class="p"><pre class="codeblock"><code>cd <var class="keyword varname">&lt;carpeta&gt;</var></code></pre>
</div>
</li>
<li>Añada el nombre de la carpeta siempre que se muestre la variable <var class="keyword varname">${WORKSPACE}</var>. La variable
<var class="keyword varname">${WORKSPACE}</var> detecta automáticamente el directorio raíz del proyecto.<div class="p">Ejemplo<pre class="codeblock"><code>BUILD_COMMAND="build --pull --tag ${FULL_REPOSITORY_NAME} ${WORKSPACE}/<var class="keyword varname">&lt;carpeta&gt;</var>"</code></pre>
</div>
</li>
</ol>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
<li class="step stepexpand"><span class="cmd">Pulse el icono <span class="ph uicontrol">Ejecutar etapa</span> para verificar que la etapa se cree sin
errores.</span> Si la compilación falla, revise los registros y corrija los errores. Si la etapa pasa, compruebe el registro de
imágenes de la organización y verifique que se haya compilado la imagen.</li>
</ol>
</div>
</article><article class="topic task nested3" role="article" aria-labelledby="d58943e3015" lang="es-es" id="unique_1077347552"><h4 class="topictitle4" id="d58943e3015">(Opcional) Comprobación de la seguridad de las imágenes como parte del conducto</h4>
<div class="body taskbody"><div class="abstract"><span class="shortdesc">Detecte problemas de seguridad o de configuración en su imagen antes de desplegar el contenedor mediante
Vulnerability Advisor.</span>
</div>
<div class="section context"><div class="p">Configuración de conducto común que incluye esta exploración:<ul><li>Etapa de compilación para compilar los archivos de origen</li>
<li>Etapa de proceso, que incluye los siguientes trabajos: <ul><li>Un trabajo de compilación para ejecutar una compilación del contenedor</li>
<li>Un trabajo de prueba para ejecutar Vulnerability Advisor en una imagen</li>
</ul>
</li>
<li>Etapa de despliegue para desplegar el contenedor</li>
</ul>
</div>

<div class="note tip"><span class="tiptitle">Consejo:</span> Esta tarea describe cómo crear un trabajo de prueba para Vulnerability Advisor en una
fase distinta que el trabajo que crea la imagen del contenedor. Como alternativa, puede utilizar la misma
fase. Si decide crear una fase distinta, no es necesario que defina la variable de entorno. </div>
</div><p class="li stepsection">Crear la exploración de Vulnerability Advisor.</p><ol class="steps" id="unique_1077347552__steps"><li class="step stepexpand"><span class="cmd">Cree una etapa de proceso.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="cmd">Pulse <span class="ph uicontrol">Añadir etapa</span>.</span></li>
<li class="li substep"><span class="cmd">Dé un nombre a la etapa. </span> Por ejemplo, <samp class="ph codeph"><var class="keyword varname">Proceso</var></samp>. </li>
<li class="li substep"><span class="cmd">Para el tipo de entrada, seleccione <span class="ph uicontrol">Artefactos de compilación</span>.</span></li>
<li class="li substep"><span class="cmd">Para la fase y el trabajo, verifique los valores y la actualización,
si es necesario.</span></li>
<li class="li substep"><span class="cmd">Pulse el separador <span class="ph uicontrol">TRABAJOS</span>.</span></li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">En la etapa de proceso, añada un trabajo de prueba para ejecutar la exploración del código.</span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">En el separador <span class="ph uicontrol">TRABAJOS</span>, pulse <span class="ph uicontrol">AÑADIR TRABAJO</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el tipo de trabajo, seleccione <span class="ph uicontrol">Prueba</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para <span class="ph uicontrol">Tipo de probador</span>, seleccione <span class="ph uicontrol">IBM Vulnerability
Advisor</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Si es necesario, actualice el destino, la organización y el espacio de <span class="keyword">Bluemix</span>. </span></li>
<li class="li substep substepexpand"><span class="cmd">Para <span class="ph uicontrol">Minutos que se debe esperar para que el análisis se complete</span>,
especifique un valor de 0 a 59 minutos.</span> El valor predeterminado es <var class="keyword varname">5</var> minutos. Al final del trabajo, se proporciona un URL para el panel de control en los registros de la consola. 
<p>Si la exploración no finaliza antes de que transcurra este tiempo, el trabajo falla, pero el análisis de exploración continúa ejecutándose y se puede ver en el panel de control. Una vez que se haya completado la exploración de, si vuelve a ejecutar el trabajo, la solicitud de exploración no se volverá a enviar
y el trabajo de conducto puede completarse satisfactoriamente. Como alternativa, puede
configurar el conducto para que no esté bloqueada en un resultado de exploración satisfactorio,
que se describe en el paso siguiente. </p>
</li>
<li class="li substep substepexpand"><span class="cmd">Para determinar el comportamiento en el tiempo de espera excedido, seleccione o desmarque el recuadro de selección <span class="ph uicontrol">Dejar de ejecutar esta etapa si el trabajo falla</span>.</span> <p>Puede
configurar el trabajo para bloquear la ejecución de los trabajos posteriores de la etapa y de etapas posteriores
si este trabajo falla, o puede configurar la etapa
para continuar sin bloquear etapas ni trabajos posteriores.
El estado del trabajo está determinado por la existencia de grandes problemas de seguridad. </p>


<p>Los grandes problemas de seguridad provocan que el trabajo falle. En función de la selección para <span class="ph uicontrol">Dejar de ejecutar esta etapa si el trabajo falla</span>, un trabajo
fallido detiene el proceso de la etapa y del conducto o
les permite continuar. Si sabe que el informe incluye muchos
problemas para procesar, puede configurar la etapa para continuar porque
la exploración puede tardar bastante tiempo. En este caso de ejemplo, es posible que no desee
que se detenga el resto de los trabajos y etapas sólo porque la exploración está tardando
demasiado tiempo.</p>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Si el trabajo se encuentra en la misma etapa que el trabajo de creación, establezca una variable de entorno para el
nombre de repositorio.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="cmd">Pulse el separador <span class="ph uicontrol">PROPIEDADES DE ENTORNO</span>.</span></li>
<li class="li substep"><span class="cmd">Pulse <span class="ph uicontrol">AÑADIR PROPIEDAD</span> y seleccione <span class="ph uicontrol">Propiedad de texto</span>.</span></li>
<li class="li substep"><span class="cmd">En el campo <span class="ph uicontrol">Nombre</span>, escriba <samp class="ph codeph">FULL_REPOSITORY_NAME</samp></span></li>
<li class="li substep"><span class="cmd">En el campo <span class="ph uicontrol">Valor</span>, no especifique nada.</span> El nombre de la imagen que se especifica en el trabajo de creación del contenedor se pasa a través de esta variable de entorno.</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
<li class="step stepexpand"><span class="cmd">Pulse el icono <span class="ph uicontrol">Ejecutar etapa</span> para verificar que la etapa se cree sin
errores.</span></li>
</ol>
<div class="section result"><div class="p">Para ver los resultados de una exploración de Vulnerability Advisor, una vez finalizado el trabajo, pulse <span class="ph uicontrol">Ver resultados e historial</span>. En el separador <span class="ph uicontrol">REGISTROS</span>, busque la siguiente sección:<pre class="pre msgblock"><code>Se han encontrado resultados de vulnerabilidad de image registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">espacio_nombres</var>/<var class="keyword varname">imagen</var></code></pre>
</div>

<p>Se enumera una lista de paquetes vulnerables, problemas de seguridad y mejoras sugeridas, según se
describe en el tema de Vulnerability Advisor <a href="va/va_index.html#va_reviewing">Revisión de un informe de imágenes</a>. Se proporciona el código del Dockerfile para resolver algunos
problemas comunes al <a href="va/va_index.html#va_report">Resolver problemas en imágenes</a>.</p>
</div></div>
</article><article class="topic task nested3" role="article" aria-labelledby="d58943e3292" lang="es-es" id="unique_934818401"><h4 class="topictitle4" id="d58943e3292">(Opcional) Limpieza de imágenes con <span class="keyword">Delivery Pipeline</span></h4>
<div class="body taskbody"><p class="shortdesc">El trabajo de compilación de servicio <span class="keyword">IBM
Bluemix Container Service</span> limpia
automáticamente versiones de imágenes no utilizadas. Las imágenes que se están utilizando no se eliminarán. Puede especificar un
número de versiones de imágenes para guardar o puede inhabilitar la limpieza de imágenes.</p>
<p class="li stepsection">Para cambiar el número de versiones de imágenes que se guardan para un proyecto:</p><ol class="steps"><li class="step"><span class="cmd">En el conducto, abra el archivo de configuración para la etapa de compilación.</span></li>
<li class="step"><span class="cmd">En el separador <span class="ph uicontrol">PROPIEDADES DE ENTORNO</span>, pulse <span class="ph uicontrol">AÑADIR PROPIEDAD</span>.</span></li>
<li class="step"><span class="cmd">Seleccione <span class="ph uicontrol">Propiedades de texto</span>.</span></li>
<li class="step"><span class="cmd">En el campo <span class="ph uicontrol">Nombre</span>, escriba el mandato <samp class="ph codeph">IMAGE_LIMIT</samp>.</span></li>
<li class="step"><span class="cmd">En el campo <span class="ph uicontrol">Valor</span>, escriba el número de versiones de imágenes a guardar en el registro para este proyecto. De forma predeterminada, se conservarán las cinco versiones de imágenes más recientes para un proyecto. Para
inhabilitar la limpieza de imágenes y guardar todas las versiones de imágenes, establezca el valor en
<samp class="ph codeph">-1</samp>.</span></li>
<li class="step"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
</ol>
</div>
</article><article class="topic task nested3" role="article" aria-labelledby="d58943e3427" lang="es-es" id="unique_998271710"><h4 class="topictitle4" id="d58943e3427">(Opcional) Enlace de un servicio a un contenedor mediante <span class="keyword">Delivery Pipeline</span></h4>
<div class="body taskbody"><p class="shortdesc">Los servicios no se pueden enlazar directamente a un contenedor. Como alternativa, puede enlazar el servicio a una app y esta al contenedor configurando una propiedad de entorno en una fase de conducto. La app sirve como puente entre el servicio y el contenedor.</p>
<div class="section prereq"><p id="unique_998271710__context"><span class="keyword">Bluemix</span> proporciona un conjunto de variables de entorno que definen los nombres y los detalles de los servicios enlazados a una app, como por ejemplo la base de datos SQL de ClearDB o Preguntas y respuestas. Estas variables de entorno se denominan <samp class="ph codeph">VCAP_SERVICES</samp>. Cuando se enlaza un contenedor a un servicio, los <samp class="ph codeph">VCAP_SERVICES</samp> se pasan en el contenedor como una variable de entorno a través de una app que actúa como puente entre el contenedor y el servicio. Luego el contenedor puede buscar información del servicio, como por ejemplo el punto final, el usuario y la contraseña.</p>

<p>Antes de configurar la propiedad del entorno, identifique una app existente que tenga servicios enlazados o bien cree una app mediante la interfaz gráfica de usuario de <span class="keyword">Bluemix</span> o la línea de mandatos. Para obtener más información, consulte <a href="container_troubleshoot.html#ts_bridge_app">El servicio de Bluemix no se enlaza directamente a un contenedor</a>.</p>
</div><p class="li stepsection">Enlace la app puente al contenedor.</p><ol class="steps"><li class="step"><span class="cmd">En la página Visión general de la cadena de herramientas, pulse <span class="ph uicontrol"><span class="keyword">Delivery Pipeline</span></span>.</span></li>
<li class="step"><span class="cmd">Abra una etapa de conducto y pulse el separador <span class="ph uicontrol">PROPIEDADES DE ENTORNO</span>.</span></li>
<li class="step"><span class="cmd">Pulse <span class="ph uicontrol">AÑADIR PROPIEDAD</span> y seleccione <span class="ph uicontrol">Propiedad de texto</span>.</span></li>
<li class="step"><span class="cmd">En el campo <span class="ph uicontrol">Nombre</span>, escriba el mandato <kbd class="ph userinput">BIND_TO</kbd>.</span></li>
<li class="step"><span class="cmd">En el campo <span class="ph uicontrol">Valor</span>, especifique el nombre de la app puente, como por ejemplo <var class="keyword varname">pipeline_bridge_app</var>.</span></li>
<li class="step"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
<li class="step"><span class="cmd">Pruebe la configuración ejecutando el conducto.</span></li>
</ol>
<div class="section postreq"><div class="note tip"><span class="tiptitle">Consejo:</span> Después de que la app de puente se enlace con un contenedor, no la elimine. Si suprime una app de puente enlazada, el contenedor se colgará. Suprima el contenedor, y
el resto de los contenedores que utilizan la app de puente, antes de suprimir
la app de puente.</div>
</div></div>
</article><article class="topic task nested3" role="article" aria-labelledby="d58943e3586" lang="es-es" id="container_group_pipeline_deploy"><h4 class="topictitle4" id="d58943e3586">Creación de etapas de despliegue para grupos de contenedores utilizando <span class="keyword">Delivery Pipeline</span></h4>
<div class="body taskbody"><p class="shortdesc">Puede crear una etapa de despliegue para el grupo de contenedores utilizando <span class="keyword">Delivery Pipeline</span>.</p>
<div class="section prereq"><div class="p">Antes de empezar:<ul><li><a href="container_integrations.html#container_group_pipeline_build" title="IBM Bluemix Container Service incluye un servicio de compilación que acepta código fuente y, a continuación, crea y publica una imagen Docker en el registro de contenedores. Delivery Pipeline, que forma parte de IBM Bluemix Continuous Delivery, proporciona un trabajo de compilación que utiliza el servicio de compilación de contenedores. Este trabajo de compilación toma el código fuente de un repositorio, compila una imagen de Docker a partir de dicho código, versiona (etiquetas) dicha imagen para hacer coincidir el número de compilación y, a continuación, envía la imagen resultante al registro de IBM Bluemix Container Service de la organización en Bluemix. A continuación, los miembros de la organización pueden desplegar la imagen resultante a espacios dentro de la organización.">Cree una etapa de compilación</a>.</li>
<li><a href="https://github.com/Osthanes/deployscripts/blob/master/deploygroup.sh" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">Revise el script de despliegue predeterminado para los grupos de contenedores</a>. Puede bifurcar el script predeterminado y editarlo o, si no, crear su propio script para usarlo.</li>
<li><a href="../services/ContinuousDelivery/pipeline_deploy_var.html">Revise una lista de variables de entorno disponibles suministradas por el servicio <span class="keyword">Delivery Pipeline</span></a>.</li>
</ul>
</div>
</div><ol class="steps"><li class="step stepexpand"><span class="cmd">Cree una etapa de despliegue.</span> <ol type="a" class="ol substeps"><li class="li substep"><span class="cmd">Pulse <span class="ph uicontrol">AÑADIR ETAPA</span>.</span></li>
<li class="li substep"><span class="cmd">Dé un nombre a la etapa. </span> Por ejemplo, <samp class="ph codeph"><var class="keyword varname">Desplegar</var></samp>.</li>
<li class="li substep"><span class="cmd">Para el tipo de entrada, seleccione <span class="ph uicontrol">Artefactos de compilación</span>.</span></li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">En la etapa, cree un trabajo de despliegue.</span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">En el separador <span class="ph uicontrol">TRABAJOS</span>, pulse <span class="ph uicontrol">AÑADIR TRABAJO</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el tipo de trabajo, seleccione <span class="ph uicontrol">Despliegue</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el tipo de desplegador, seleccione <span class="ph uicontrol">Servicio IBM Container de <span class="keyword">Bluemix</span></span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Seleccione la organización y el espacio.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para la estrategia de despliegue, especifique
uno de los valores siguientes.</span> <ul><li><span class="ph uicontrol">red_black</span> - Despliega una nueva versión de la app. Si el despliegue es satisfactorio, se elimina el despliegue previo de la app y la ruta o dirección IP se asigna a la nueva versión.</li>
<li><span class="ph uicontrol">clean</span>: elimina todos los despliegues anteriores de la aplicación. </li>
</ul>
</li>
<li class="li substep substepexpand"><span class="cmd">Para el nombre, especifique el nombre
del contenedor que desea desplegar.</span></li>
<li class="li substep substepexpand"><span class="cmd">Para el puerto, especifique el puerto publicado
para el contenedor.</span> Para grupos de contenedores, solo puede especificar un puerto.
<div class="note tip"><span class="tiptitle">Consejo:</span> Si no se ha especificado ningún puerto y va a utilizar el script de despliegue predeterminado, el puerto 80 se publica automáticamente. Para convertir un contenedor en privado con el script de despliegue predeterminado, lleve a cabo los siguientes pasos.
<ol type="i"><li>Para la estrategia de despliegue, especifique <kbd class="ph userinput">simple</kbd>.</li>
<li> Deje el campo <span class="ph uicontrol">Puerto</span> en blanco.</li>
<li>Como los despliegues simples no limpian los despliegues anteriores, puede crear otra etapa de despliegue para limpiarlos. Establezca la <span class="ph uicontrol">Estrategia de despliegue</span> de la segunda etapa de despliegue en <kbd class="ph userinput">limpiar</kbd>.</li>
</ol>
</div>
</li>
<li class="li substep substepexpand"><span class="cmd">Si tiene argumentos de despliegue opcionales, especifíquelos.</span> Por ejemplo,
si la app requiere una variable de entorno para la ubicación de la base de datos
de fondo, puede incluir esta línea:

<pre class="codeblock"><code>--env MY_DB_HOSTNAME_PROPERTY=<var class="keyword varname">mydbhostname</var></code></pre>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Configure un despliegue de grupo de contenedores en lugar de un despliegue de contenedor único. En la sección "Script del desplegador", elimine el signo # para eliminar el comentario del script de grupo de contenedores:</span> <pre class="pre screen"><code>/bin/bash deployscripts/deploygroup.sh</code></pre>
Añada un signo # para comentar el script de contenedor único:
<pre class="pre screen"><code>#/bin/bash deployscripts/deploycontainer.sh</code></pre>
</li>
<li class="step stepexpand"><span class="cmd">Si ha creado su propio script de despliegue, edite la sección <span class="ph uicontrol">Script del desplegador</span> para usarlo.</span> <ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">Copie la siguiente línea y actualícela para usar su repositorio.</span> <pre class="pre screen"><code>git_retry clone https://github.com/Osthanes/deployscripts.git deployscripts</code></pre>
</li>
<li class="li substep substepexpand"><span class="cmd">Edite la siguiente línea para usar el script.</span> <pre class="pre screen"><code>/bin/bash deployscripts/deploygroup.sh</code></pre>
</li>
</ol>
</li>
<li class="step stepexpand">Opcional: <span class="cmd">Para configurar un grupo de contenedores básico, establezca cada una de las variables de entorno de la tabla.</span> Estas propiedades le permiten establecer algunas de las opciones que podría establecer al desplegar contenedores de la línea de mandatos o la interfaz de <span class="keyword">Bluemix</span>. Para otras propiedades, consulte los comentarios de la sección Script del desplegador de la interfaz de usuario.<ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">Pulse el separador <span class="ph uicontrol">PROPIEDADES DE ENTORNO</span>
y pulse <span class="ph uicontrol">AÑADIR PROPIEDAD</span>. </span></li>
<li class="li substep substepexpand"><span class="cmd">Seleccione <span class="ph uicontrol">Propiedades de texto</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Escriba el nombre y el valor de una propiedad de entorno.</span> <div class="tablenoborder"><table summary="" id="container_group_pipeline_deploy__common_properties" class="defaultstyle"><thead><tr><th id="d58943e3875" class="thleft">Propiedad</th>
<th id="d58943e3877" class="thleft">Descripción</th>
</tr>
</thead>
<tbody><tr><td headers="d58943e3875 "><span class="ph uicontrol">AUTO_RECOVERY</span></td>
<td headers="d58943e3877 "><kbd class="ph userinput">true</kbd> o <kbd class="ph userinput">false</kbd><p><span class="ph">Cuando se habilite la recuperación automática para un grupo de contenedores y el
grupo se haya estado ejecutando 10 minutos, el equilibrador de carga del grupo comenzará a comprobar de forma regular el
estado de cada instancia de contenedor en el grupo mediante solicitudes HTTP. Si una instancia de contenedor no responde
en el espacio de 100 segundos, se marcará como inactiva. Las instancias de contenedor inactivas se eliminarán del grupo
y las volverá a crear la recuperación automática. La recuperación automática intentará recuperar instancias de contenedor en
un grupo 3 veces. Tras el tercer intento, la recuperación automática no recuperará ninguna instancia de contenedor en
el grupo durante 60 minutos. Tras 60 minutos, el proceso de recuperación automática empezará de nuevo.</span></p>
</td>
</tr>
<tr><td headers="d58943e3875 "><span class="ph uicontrol">CONCURRENT_VERSIONS</span></td>
<td headers="d58943e3877 ">Un número<p>La propiedad de entorno <samp class="ph systemoutput">CONCURRENT_VERSIONS</samp>
establece el número de versiones de los despliegues de la app a mantener
activas. El valor predeterminado es una versión. Por ejemplo, si <samp class="ph systemoutput">CONCURRENT_VERSIONS</samp> se establece
en 2 y está desplegando un grupo de contenedor, se correlacionarán dos grupos
con la ruta y para recibir tráfico.</p>

<p>Para eliminar siempre todos los despliegues de la app, en el separador ENVIRONMENT PROPERTIES, puede establecer
<samp class="ph systemoutput">CONCURRENT_VERSIONS</samp> en <samp class="ph systemoutput">0</samp>.</p>
</td>
</tr>
<tr><td headers="d58943e3875 "><span class="ph uicontrol">DESIRED_INSTANCES</span></td>
<td headers="d58943e3877 ">Un número<p>Ejemplo: <samp class="ph codeph">4</samp></p>
<span class="ph">El número de instancias de grupos de contenedores que la app requiere dependerá de la carga de trabajo esperada y del tiempo en el que la app puede procesar una solicitud. Por ejemplo, la multitarea o la conectividad de red afecta a cuántas instancias pueden ser necesarias para la app.</span><p><span class="ph">Para que el grupo de contenedores esté altamente disponible y más resistente a fallos, considere incluir más instancias que el mínimo para manejar la carga de trabajo esperada.
Las instancias adicionales pueden manejar la carga de trabajo en el caso de que se bloque otra instancia. Para asegurarse la recuperación automática de una instancia fallida sin afectar la carga de trabajo, incluya una instancia adicional. Para la protección frente a dos anomalías simultáneas, incluya dos instancias adicionales. Esta configuración es un patrón
<var class="keyword varname">N+2</var>, donde <var class="keyword varname">N</var> es el número de instancias para manejar las solicitudes y <var class="keyword varname">+2</var> son dos instancias adicionales.</span></p>
</td>
</tr>
<tr><td headers="d58943e3875 "><span class="ph uicontrol">ROUTE_DOMAIN</span></td>
<td headers="d58943e3877 ">Una cadena o <samp class="ph codeph">none</samp><p>Ejemplo: <samp class="ph codeph">mycustomdomain.com</samp></p>
<p>El dominio del sistema predeterminado es <samp class="ph codeph"><span class="keyword" data-hd-keyref="APPDomain">AppDomainName</span></samp> y ya proporciona un certificado SSL, para que pueda acceder a los grupos de contenedores con HTTPS sin configuración adicional. Para utilizar un dominio personalizado, debe registrar el dominio personalizado en un servidor de DNS público, configurar el dominio personalizado en <span class="keyword">Bluemix</span>,
y luego correlacionar el dominio personalizado con el dominio del sistema <span class="keyword">Bluemix</span> en el servidor de DNS público.</p>
<p>Si no se especifica un dominio, se utilizará <samp class="ph codeph"><span class="keyword" data-hd-keyref="APPDomain">AppDomainName</span></samp>. Si se especifica <samp class="ph codeph">none</samp>, no se creará ningún dominio.</p>
<p>Si se especifica <samp class="ph codeph">none</samp> para el nombre de host y el dominio, podrán acceder al grupo otros contenedores del mismo espacio pero no será accesible públicamente.</p>
</td>
</tr>
<tr><td headers="d58943e3875 "><span class="ph uicontrol">ROUTE_HOSTNAME</span></td>
<td headers="d58943e3877 ">Una cadena o <samp class="ph codeph">none</samp><p>Ejemplo: <samp class="ph codeph">myapp</samp></p>
<p>El nombre de host, por ejemplo, <var class="keyword varname">mycontainerhost</var>. No incluya caracteres de subrayado (_) en el nombre de host. El host y el dominio combinados forman el URL completo de la ruta pública, como <samp class="ph codeph">http://mycontainerhost.<span class="keyword" data-hd-keyref="APPDomain">AppDomainName</span></samp>. </p>
<p>Si no se ha especificado un nombre de host, se crea un nombre de host para usted. Si está especificado <samp class="ph codeph">none</samp>, no se creará ningún nombre de host.</p>
<p>Si se especifica <samp class="ph codeph">none</samp> para el nombre de host y el dominio, podrán acceder al grupo otros contenedores del mismo espacio pero no será accesible públicamente.</p>
</td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
</li>
<li class="step stepexpand"><span class="cmd">Pulse <span class="ph uicontrol">GUARDAR</span>.</span></li>
</ol>
</div>
</article></article></article><article class="topic tutorial tutorialIntro nested1" role="article" aria-labelledby="d58943e4019" lang="es-es" id="container_cfapp_tutorial_intro"><h2 class="topictitle2" id="d58943e4019">Guía de aprendizaje: Despliegue de una app Node.js de Cloud Foundry en un contenedor</h2>
<div class="body  tutorialIntroBody"><p class="shortdesc">Puede tomar una app que ha desplegado anteriormente utilizando Cloud Foundry y desplegarla en
un contenedor utilizando <span class="keyword">IBM
Bluemix Container Service</span>.</p>
<div class="section tutorialDesc longDesc"></div><section class="section learningObjectives tutorialLearningObjectives" role="region" aria-labelledby="d58943e4068"><h3 class="sectiontitle" id="d58943e4068">Objetivos</h3>
<ul><li>Obtenga el proceso general del despliegue de contenedores</li>
<li>Aprenda lo que debe incluirse en un Dockerfile para crear una imagen</li>
</ul>
</section>
<section class="section timeRequired tutorialTimeRequired" role="region" aria-labelledby="d58943e4077"><h3 class="sectiontitle" id="d58943e4077">Tiempo necesario</h3>30
minutos</section>
<section role="region" aria-labelledby="d58943e4081" class="section section audienceDesc"><h3 class="sectiontitle" id="d58943e4081">Público</h3>Desarrolladores de apps de Cloud Foundry</section><section role="region" aria-labelledby="d58943e4085" class="section section prerequisites"><h3 class="sectiontitle" id="d58943e4085">Requisitos previos</h3>
<ul><li><a href="container_cli_cfic_install.html#container_cli_cfic_install" title="Instale el plug-in de IBM Bluemix Container Service (bx ic) para ejecutar mandatos de la CLI de Docker nativa y gestionar así sus contenedores.">Instale la CLI de <span class="keyword">IBM
Bluemix Container Service</span></a></li>
<li><a href="container_cli_cfic_install.html#container_cli_login" title="Después de instalar la CLI, inicie sesión para empezar a utilizarla.">Inicie sesión en la CLI de <span class="keyword">IBM
Bluemix Container Service</span></a></li>
</ul>
</section></div>
<article class="topic task tutorialLesson nested2" role="article" aria-labelledby="d58943e4126" lang="es-es" id="container_cfapp_tutorial_lesson1"><h3 class="topictitle3" id="d58943e4126">Lección 1: Descargue el código de la app Node.js de Cloud Foundry</h3>
<div class="body taskbody"><p class="shortdesc">Obtenga el código Node.js listo para su lanzamiento. ¿Aún no tiene un código? Puede descargar el código de inicio
a partir de <span class="keyword">Bluemix</span> para utilizarlo en esta
guía de aprendizaje.</p>
<div class="section prereq">Antes de empezar, <a href="container_cli_cfic_install.html#container_cli_cfic_install" title="Instale el plug-in de IBM Bluemix Container Service (bx ic) para ejecutar mandatos de la CLI de Docker nativa y gestionar así sus contenedores.">instale la CLI de <span class="keyword">IBM
Bluemix Container Service</span></a> e
<a href="container_cli_cfic_install.html#container_cli_login" title="Después de instalar la CLI, inicie sesión para empezar a utilizarla.">inicie sesión</a>.</div><p class="li stepsection">Para obtener y organizar el código de la app:</p><ol class="steps"><li class="step stepexpand"><span class="cmd">Cree un directorio que se denomina <kbd class="ph userinput"><var class="keyword varname">cf-pi-myinitials</var></kbd> y
navegue a él.</span> En este directorio, guarde todos los archivos necesarios para crear la imagen Docker y para ejecutar
la app Node.js. Puede utilizar cualquier nombre para el directorio. Si utiliza el nombre del ejemplo,
sustituya <var class="keyword varname">myinitials</var> por sus iniciales, como por ejemplo
<var class="keyword varname">cf-pi-ms</var>.
<pre class="codeblock"><code>mkdir <var class="keyword varname">cf-pi-myinitials</var> &amp;&amp; cd <var class="keyword varname">cf-pi-myinitials</var></code></pre>
</li>
<li class="step stepexpand"><span class="cmd">Copie el código de la app Node.js y todos los archivos relacionados en el directorio.</span> Puede utilizar su propio código de la app Node.js o descargar la app Personal Insights desde <span class="keyword">Bluemix</span>. 
<p>Para descargar el código de la app Personal Insights
desde <span class="keyword">Bluemix</span>, siga estos pasos.</p>
<ol type="a" class="ol substeps"><li class="li substep substepexpand"><span class="cmd">En el <span class="keyword wintitle">Catálogo</span> de <span class="keyword">Bluemix</span>,
en <span class="ph uicontrol">Contenedores modelo</span>, pulse <span class="ph uicontrol">Iniciador web Node.js de Personality
Insights</span>.</span> Este contenedor modelo incluye una app Node.js que utiliza el servicio de <span class="keyword">IBM
Watson Personality Insights</span> para extraer un espectro
de características cognitivas y sociales de un texto que una persona genera a través de blogs, tweets,
o las publicaciones del foro.</li>
<li class="li substep substepexpand"><span class="cmd">Especifique el nombre de la app <kbd class="ph userinput"><var class="keyword varname">cf-pi-myinitials</var></kbd> y pulse
<span class="ph uicontrol">CREAR</span>.</span> Para acceder al código de la app para el contenedor modelo, debe desplegar la app de CF en <span class="keyword">Bluemix</span> en primer lugar. Puede usar cualquier nombre para la app. Si utiliza el nombre del ejemplo, reemplace <var class="keyword varname">myinitials</var> por sus iniciales, por ejemplo, <var class="keyword varname">cf-pi-ms</var>, para asegurarse de que sea único. 
<p>Este despliegue crea una app que se denomina
<var class="keyword varname">cf-pi-myinitials</var>, así como una instancia del servicio de <span class="keyword">IBM
Watson Personality Insights</span> que se denomina
<var class="keyword varname">cf-pi-myinitials-personality_insights</var>. </p>

<p>A medida que se despliega la app,
se mostrarán instrucciones para <strong>Despliegue de la app con la interfaz de línea de mandatos</strong>.</p>
</li>
<li class="li substep substepexpand"><span class="cmd">En el paso 1, pulse <span class="ph uicontrol">DESCARGAR CÓDIGO DE INICIADOR</span>.</span></li>
<li class="li substep substepexpand"><span class="cmd">Extraiga el archivo .zip y guarde los archivos de la app en el directorio. </span></li>
</ol>
</li>
</ol>
<div class="section result">Su código de la app de Cloud Foundry está listo para ser contenerizado.</div></div>
</article><article class="topic task tutorialLesson nested2" role="article" aria-labelledby="d58943e4321" lang="es-es" id="container_cfapp_tutorial_lesson2"><h3 class="topictitle3" id="d58943e4321">Lección 2: Creación de una imagen de Docker con el código de la app de CF</h3>
<div class="body taskbody"><p class="shortdesc">Cree un Dockerfile que incluya el código de la app de Node.js y las configuraciones necesarias
para el contenedor. A continuación, cree una imagen de Docker desde dicho Dockerfile y envíela por push a su registro privado
de <span class="keyword">Bluemix</span>.</p>
<p class="li stepsection">Para crear una imagen de Docker con el código de la app, siga estos pasos.</p><ol class="steps"><li class="step stepexpand"><span class="cmd">Cree un <span class="ph filepath">Dockerfile</span>, que es la base para crear un contenedor. </span> Puede crear el Dockerfile utilizando el editor de CLI que desee o un editor de texto del
sistema. El siguiente ejemplo muestra cómo crear un archivo Dockerfile con el <a href="https://www.nano-editor.org/dist/v2.2/nano.html" rel="external" target="_blank" title="(Abre en una nueva sesión o ventana)">editor nano</a>. 
<pre class="codeblock"><code>nano Dockerfile</code></pre>
</li>
<li class="step stepexpand"><span class="cmd">Copie el script siguiente en el Dockerfile.</span> <pre class="codeblock"><code>#Utilice la imagen de IBM Node como una imagen base
FROM registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/ibmnode:latest

#Exponga el puerto para la app Personal Insights, y establézcalo 
#como una variable de entorno tal como esperan las apps de cf
ENV PORT=3000
EXPOSE 3000
ENV NODE_ENV production

#Copie todos los archivos de la app desde el directorio actual al directorio de la 
#app del contenedor. Establezca el directorio de la app
#como el directorio de trabajo
ADD . /app
WORKDIR /app

#Instale los requisitos necesarios desde package.json
RUN npm install

#Realice una suspensión antes de que se inicie la app. Este mandato garantiza que la
#gestión de redes de IBM Containers ha finalizado antes de que se inicie la app. 
CMD (sleep 60; npm start)

#Inicie la app Personal Insight. 
CMD ["node", "/app/app.js"]</code></pre>
</li>
<li class="step stepexpand"><span class="cmd">Guarde los cambios pulsando <span class="ph uicontrol">ctrl + o</span>. Confirme los cambios pulsando <span class="ph uicontrol">INTRO</span>. Salga del editor nano mediante <span class="ph uicontrol">ctrl + x</span>.</span></li>
<li class="step stepexpand"><span class="cmd">Cree la imagen de Docker con el código de la app y envíela por push al registro privado de <span class="keyword">Bluemix</span>.</span> <pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> build -t registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">namespace</var>/<var class="keyword varname">cf-pi-myinitials</var> .</code></pre>


<div class="tablenoborder"><table summary="" id="container_cfapp_tutorial_lesson2__table_build" class="defaultstyle"><thead><tr><th colspan="2" id="d58943e4430" class="thleft"><span class="ph"><img src="images/idea.png" alt="Este icono indica que hay más información para aprender sobre este paso de la tarea."></span> Componentes de este mandato</th>
</tr>
</thead>
<tbody><tr><td style="width: 50%" headers="d58943e4430 "><samp class="ph codeph">build</samp></td>
<td style="width: 50%" headers="d58943e4430 ">El mandato <samp class="ph codeph">build</samp>.</td>
</tr>
<tr><td style="width: 50%" headers="d58943e4430 "><samp class="ph codeph">registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">namespace</var>/<var class="keyword varname">cf-pi-myinitials</var></samp></td>
<td style="width: 50%" headers="d58943e4430 ">La vía de acceso del registro privado de <span class="keyword">Bluemix</span>,
que incluye el espacio de nombres y el nombre de la imagen. Para este ejemplo, se utiliza el mismo
nombre para la imagen como la app CF node <var class="keyword varname">cf-pi-myinitials</var>, pero puede elegir
cualquier nombre para la imagen en el registro privado. Si no está seguro de cuál es su espacio de nombres,
ejecute el mandato siguiente para encontrarlo.
<pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> namespace-get</code></pre>
</td>
</tr>
<tr><td style="width: 50%" headers="d58943e4430 "><samp class="ph codeph">.</samp></td>
<td style="width: 50%" headers="d58943e4430 ">La ubicación del Dockerfile. Si está ejecutando el mandato de compilación desde el directorio que incluye
el Dockerfile, escriba un punto (.). De lo contrario, utilice una vía de acceso relativa al
Dockerfile.</td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
<div class="section result">Se creará la imagen en el registro. Puede ejecutar el mandato <samp class="ph codeph"><span class="ph"><samp class="ph codeph">bx ic</samp></span> images</samp> para verificar que se haya creado la imagen.<pre class="pre screen"><code>$ <span class="ph"><samp class="ph codeph">bx ic</samp></span> images
REPOSITORY                                        TAG                 IMAGE ID            CREATED             SIZE
registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">namespace</var>/<var class="keyword varname">cf-pi-myinitials</var>  latest  b02b7a24c35f  48 seconds ago  251.3 MB</code></pre>
</div></div>
</article><article class="topic task tutorialLesson nested2" role="article" aria-labelledby="d58943e4500" lang="es-es" id="container_cfapp_tutorial_lesson3"><h3 class="topictitle3" id="d58943e4500">Lección 3: Despliegue de un contenedor desde la imagen</h3>
<div class="body taskbody"><p class="shortdesc">Despliegue la app como un grupo de contenedores en <span class="keyword">Bluemix</span>.</p>
<p class="li stepsection">Para desplegar la app en un grupo de contenedores, siga estos pasos.</p><ol class="steps"><li class="step stepexpand"><span class="cmd"> Cree un grupo de contenedores desde la imagen que ha creado en la lección anterior ejecutando el
siguiente mandato.</span>  <pre class="codeblock"><code><span class="ph"><samp class="ph codeph">bx ic</samp></span> group-create --name <var class="keyword varname">cf-pi-myinitials</var> -m 64 -n <var class="keyword varname">pi-app-myinitials</var> -d <span class="keyword" data-hd-keyref="APPDomain">AppDomainName</span> -p 3000 -e CCS_BIND_SRV=<var class="keyword varname">cf-pi-myinitials-personal_insights</var> --desired 3 --auto --anti registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">namespace</var>/<var class="keyword varname">cf-pi-myinitials</var>:latest</code></pre>


<div class="p"><div class="tablenoborder"><table summary="" id="container_cfapp_tutorial_lesson3__table_group_create" class="defaultstyle"><thead><tr><th colspan="2" id="d58943e4586" class="thleft"><span class="ph"><img src="images/idea.png" alt="Este icono indica que hay más información para aprender sobre este paso de la tarea."></span> Componentes de este mandato</th>
</tr>
</thead>
<tbody><tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">group-create</samp></td>
<td style="width: 50%" headers="d58943e4586 ">El mandato <samp class="ph codeph">group-create</samp>.</td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">--name <var class="keyword varname">cf-pi-myinitials</var></samp></td>
<td style="width: 50%" headers="d58943e4586 ">El nombre del contenedor tal como desea que se muestre desde la interfaz gráfica de usuario de <span class="keyword">Bluemix</span>. </td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">-m 64</samp></td>
<td style="width: 50%" headers="d58943e4586 ">A cada instancia del grupo se le asignan 64 MB de memoria. </td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">-n <var class="keyword varname">pi-app-myinitials</var></samp></td>
<td style="width: 50%" headers="d58943e4586 ">El nombre de host en el URL de la ruta.<div class="note tip"><span class="tiptitle">Consejo:</span> Si está utilizando el código de inicio, utilice un nombre distinto para el nombre de host que el que ha utilizado en la lección anterior para desplegar la app de Cloud Foundry. Si se utiliza el mismo host y la app de CF sigue estando en ejecución, se producirá el equilibrio de carga entre el grupo de contenedores y la app. </div>
</td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">-d <span class="keyword" data-hd-keyref="APPDomain">AppDomainName</span></samp></td>
<td style="width: 50%" headers="d58943e4586 ">El nombre del dominio en el URL de la ruta. A no ser que tenga un dominio personalizado, utilice <span class="keyword" data-hd-keyref="APPDomain">AppDomainName</span>.</td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">-p 3000</samp></td>
<td style="width: 50%" headers="d58943e4586 ">El número de puerto a exponer. Las conexiones al URL de la ruta se reenvían al puerto 3000 en el
contenedor. </td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">-e
CCS_BIND_SRV=<var class="keyword varname">cf-pi-myinitials-personal_insights</var></samp></td>
<td style="width: 50%" headers="d58943e4586 ">Enlace la instancia del servicio <span class="keyword">IBM
Watson Personality Insights</span> con el contenedor, de forma que pueda analizar las características cognitivas y sociales desde el texto que especifique en la app de Personal Insights. La instancia de servicio se ha creado como parte del despliegue de la app de CF en la lección 1. <div class="p">Si no está seguro de cuál es el nombre de la instancia de servicio, ejecute el
mandato siguiente. <pre class="codeblock"><code>bx service list</code></pre>
</div>
</td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">--desired 3</samp></td>
<td style="width: 50%" headers="d58943e4586 ">El número de instancias de contenedor únicas a crear en el grupo de contenedores. Todas las
instancias son las mismas.</td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">--auto</samp></td>
<td style="width: 50%" headers="d58943e4586 ">Habilite la recuperación automática para el grupo de contenedores. Si una de las instancias del grupo
deja de estar disponible, se creará automáticamente otra instancia que sustituye a la que no responde. </td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">--anti</samp></td>
<td style="width: 50%" headers="d58943e4586 ">Habilite la antiafinidad para el grupo de contenedores. Cada instancia del grupo se coloca en un nodo
de cálculo físico independiente, lo que reduce las probabilidades de que todos los contenedores de un grupo se bloqueen debido a una anomalía de hardware.</td>
</tr>
<tr><td style="width: 50%" headers="d58943e4586 "><samp class="ph codeph">registry.<span class="keyword" data-hd-keyref="DomainName">DomainName</span>/<var class="keyword varname">namespace</var>/<var class="keyword varname">cf-pi-myinitials</var>:latest</samp></td>
<td style="width: 50%" headers="d58943e4586 ">Vía de acceso del repositorio de destino, que incluye el espacio de nombres único y el nombre de la imagen de destino. Para este ejemplo, se utiliza el mismo nombre para la imagen como la app CF node
<var class="keyword varname">cf-pi-myinitials</var>. </td>
</tr>
</tbody>
</table>
</div>
</div>
</li>
<li class="step stepexpand"><span class="cmd">Espere unos minutos a que el contenedor se despliegue y a que la red se configure. Cuando se despliega el
contenedor, puede ver la app Personal Insights en un navegador especificando la siguiente
URL <span class="ph filepath">http://<var class="keyword varname">pi-app-myinitials</var>.<span class="keyword" data-hd-keyref="APPDomain">AppDomainName</span>/</span>.</span></li>
<li class="step stepexpand"><span class="cmd">Elimine la app de CF. </span> Ahora que el código de la app de CF se ha desplegado en un contenedor, puede eliminar la app de CF para maximizar
el uso de la cuota. 
<pre class="codeblock"><code>cf delete <var class="keyword varname">cf-pi-myinitials</var></code></pre>
Confirme la supresión
especificando <span class="ph uicontrol">y</span>. </li>
</ol>
<div class="section result">La app se despliega en un contenedor.</div></div>
</article></article></article></div></main></body></html>